var c=Object.defineProperty;var h=(s,t,e)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var n=(s,t,e)=>h(s,typeof t!="symbol"?t+"":t,e);const l="http://localhost:3100";class u{constructor(t=l){n(this,"baseUrl");this.baseUrl=t}async health(){const t=await fetch(`${this.baseUrl}/health`);if(!t.ok)throw new Error(`Health check failed: ${t.statusText}`);return t.json()}async getRuns(t){const e=new URLSearchParams;t!=null&&t.agent&&e.set("agent",t.agent),t!=null&&t.days&&e.set("days",String(t.days)),t!=null&&t.status&&e.set("status",t.status);const r=await fetch(`${this.baseUrl}/api/runs?${e}`);if(!r.ok)throw new Error(`Failed to fetch runs: ${r.statusText}`);return r.json()}async getRun(t){const e=await fetch(`${this.baseUrl}/api/runs/${t}`);if(!e.ok)throw new Error(`Failed to fetch run: ${e.statusText}`);return e.json()}async getRunChat(t){return this.getRun(t)}async getRunTools(t){const e=await fetch(`${this.baseUrl}/api/runs/${t}/tools/detailed`);if(!e.ok)throw new Error(`Failed to fetch tool details: ${e.statusText}`);return e.json()}async getAgents(){const t=await fetch(`${this.baseUrl}/api/agents`);if(!t.ok)throw new Error(`Failed to fetch agents: ${t.statusText}`);return t.json()}async getCosts(t){const e=new URLSearchParams;t&&e.set("date",t);const r=await fetch(`${this.baseUrl}/api/costs?${e}`);if(!r.ok)throw new Error(`Failed to fetch costs: ${r.statusText}`);return r.json()}async getDashboard(t=7){const e=await fetch(`${this.baseUrl}/api/stats/dashboard?days=${t}`);if(!e.ok)throw new Error(`Failed to fetch dashboard stats: ${e.statusText}`);return e.json()}async triggerAgent(t){const e=await fetch(`${this.baseUrl}/api/agents/${t}/run`,{method:"POST"});if(!e.ok){const r=await e.json();throw new Error(r.error||`Failed to trigger agent: ${e.statusText}`)}return e.json()}async getChat(t){const e=await fetch(`${this.baseUrl}/api/chat/${t}`);if(!e.ok)throw new Error(`Failed to fetch chat: ${e.statusText}`);return e.text()}async getConfigAgents(){const t=await fetch(`${this.baseUrl}/api/config/agents`);if(!t.ok)throw new Error(`Failed to fetch agents config: ${t.statusText}`);return t.json()}async saveConfigAgents(t){const e=await fetch(`${this.baseUrl}/api/config/agents`,{method:"PUT",headers:{"Content-Type":"text/yaml"},body:t});if(!e.ok){const r=await e.json();throw new Error(r.error||`Failed to save agents config: ${e.statusText}`)}return e.json()}async getConfigModels(){const t=await fetch(`${this.baseUrl}/api/config/models`);if(!t.ok)throw new Error(`Failed to fetch models config: ${t.statusText}`);return t.json()}async saveConfigModels(t){const e=await fetch(`${this.baseUrl}/api/config/models`,{method:"PUT",headers:{"Content-Type":"text/yaml"},body:t});if(!e.ok){const r=await e.json();throw new Error(r.error||`Failed to save models config: ${e.statusText}`)}return e.json()}async reloadAgents(){const t=await fetch(`${this.baseUrl}/api/agents/reload`,{method:"POST"});if(!t.ok){const e=await t.json();throw new Error(e.error||`Failed to reload agents: ${t.statusText}`)}return t.json()}async getAllRules(){const t=await fetch(`${this.baseUrl}/api/rules`);if(!t.ok)throw new Error(`Failed to fetch rules: ${t.statusText}`);return(await t.json()).rules||[]}async getRule(t){const e=await fetch(`${this.baseUrl}/api/rules/${t}`);if(!e.ok)throw new Error(`Failed to fetch rule: ${e.statusText}`);return(await e.json()).rule}async createRule(t,e,r){const a=await fetch(`${this.baseUrl}/api/rules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,content:e,description:r})});if(!a.ok){const i=await a.json();throw new Error(i.error||`Failed to create rule: ${a.statusText}`)}return(await a.json()).rule}async updateRule(t,e){const r=await fetch(`${this.baseUrl}/api/rules/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const o=await r.json();throw new Error(o.error||`Failed to update rule: ${r.statusText}`)}return(await r.json()).rule}async deleteRule(t){const e=await fetch(`${this.baseUrl}/api/rules/${t}`,{method:"DELETE"});if(!e.ok){const r=await e.json();throw new Error(r.error||`Failed to delete rule: ${e.statusText}`)}}async getTurnRules(t){const e=await fetch(`${this.baseUrl}/api/turns/${t}/rules`);if(!e.ok)throw new Error(`Failed to fetch turn rules: ${e.statusText}`);return(await e.json()).rules||[]}async setTurnRules(t,e){const r=await fetch(`${this.baseUrl}/api/turns/${t}/rules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ruleIds:e})});if(!r.ok){const o=await r.json();throw new Error(o.error||`Failed to set turn rules: ${r.statusText}`)}return(await r.json()).rules||[]}parseJsonLines(t){return t.split(`
`).filter(e=>e.trim()).map(e=>JSON.parse(e))}}const d=new u;export{d as c};
