import{S as Me,i as je,s as qe,n as me,d as h,b as C,N as Ce,p as ze,r as Le,c,q as ve,W as Be,m as _,e as p,f as b,h as w,o as Y,j as g,k as y,$ as Re,a as q,g as D,t as V,u as pe}from"./BeOz57Dq.js";import{e as H}from"./D_ZdN6Q8.js";import"./IHki7fMi.js";import{n as Ue,y as Ke}from"./UxnmsV0t.js";function De(f,e,l){const t=f.slice();return t[9]=e[l],t}function Ve(f,e,l){const t=f.slice();return t[12]=e[l],t}function we(f,e,l){const t=f.slice();return t[15]=e[l],t}function ye(f){let e,l,t,s,n,r="Thought Preview",o,i,v="Close",a,d,k,M;function j(I,x){if(I[3])return Fe;if(I[1])return We}let P=j(f),E=P&&P(f);return{c(){e=g("button"),l=y(),t=g("div"),s=g("div"),n=g("div"),n.textContent=r,o=y(),i=g("button"),i.textContent=v,a=y(),d=g("div"),E&&E.c(),this.h()},l(I){e=p(I,"BUTTON",{class:!0,"aria-label":!0}),b(e).forEach(h),l=w(I),t=p(I,"DIV",{role:!0,"aria-modal":!0,class:!0});var x=b(t);s=p(x,"DIV",{class:!0});var O=b(s);n=p(O,"DIV",{class:!0,"data-svelte-h":!0}),Y(n)!=="svelte-1fybab4"&&(n.textContent=r),o=w(O),i=p(O,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(i)!=="svelte-1a0qbip"&&(i.textContent=v),O.forEach(h),a=w(x),d=p(x,"DIV",{class:!0});var K=b(d);E&&E.l(K),K.forEach(h),x.forEach(h),this.h()},h(){_(e,"class","fixed inset-0 bg-black/60 z-50"),_(e,"aria-label","Close"),_(n,"class","text-lg font-semibold"),_(i,"class","px-2 py-1 rounded bg-neutral-900 hover:bg-neutral-800"),_(s,"class","p-4 border-b border-neutral-800 flex items-center justify-between"),_(d,"class","p-4 space-y-3"),_(t,"role","dialog"),_(t,"aria-modal","true"),_(t,"class","fixed right-0 top-0 h-full w-full md:w-[720px] bg-neutral-950 z-50 border-l border-neutral-800 overflow-auto")},m(I,x){C(I,e,x),C(I,l,x),C(I,t,x),c(t,s),c(s,n),c(s,o),c(s,i),c(t,a),c(t,d),E&&E.m(d,null),k||(M=[ve(e,"click",f[4]),ve(i,"click",f[4]),ve(t,"click",Be(f[6]))],k=!0)},p(I,x){P===(P=j(I))&&E?E.p(I,x):(E&&E.d(1),E=P&&P(I),E&&(E.c(),E.m(d,null)))},d(I){I&&(h(e),h(l),h(t)),E&&E.d(),k=!1,Le(M)}}}function We(f){var ge,be;let e,l,t=f[1].type+"",s,n,r=f[1].status+"",o,i,v,a=f[1].title+"",d,k,M,j,P=f[1].content+"",E,I,x,O,K,J=Math.round((f[1].confidence_score||0)*100)+"",Z,ne,re,R,oe,Q=(f[1].timeframe||"-")+"",$,ee,W,F,S,z,fe,te,ue,L,ce,le,he,B,de,se,T=((ge=f[1].tickers)==null?void 0:ge.length)&&Te(f),N=((be=f[1].tags)==null?void 0:be.length)&&Ae(f),A=f[2].length&&Pe(f);return{c(){e=g("div"),l=g("div"),s=V(t),n=V(" · "),o=V(r),i=y(),v=g("div"),d=V(a),k=y(),T&&T.c(),M=y(),j=g("div"),E=V(P),I=y(),x=g("div"),O=g("div"),K=V("confidence: "),Z=V(J),ne=V("%"),re=y(),R=g("div"),oe=V("timeframe: "),$=V(Q),ee=y(),N&&N.c(),W=y(),A&&A.c(),F=y(),S=g("div"),z=g("a"),fe=V("Open full"),ue=y(),L=g("a"),ce=V("Relations"),he=y(),B=g("a"),de=V("Promote"),this.h()},l(u){e=p(u,"DIV",{});var m=b(e);l=p(m,"DIV",{class:!0});var U=b(l);s=D(U,t),n=D(U," · "),o=D(U,r),U.forEach(h),i=w(m),v=p(m,"DIV",{class:!0});var X=b(v);d=D(X,a),X.forEach(h),k=w(m),T&&T.l(m),m.forEach(h),M=w(u),j=p(u,"DIV",{class:!0});var ke=b(j);E=D(ke,P),ke.forEach(h),I=w(u),x=p(u,"DIV",{class:!0});var ae=b(x);O=p(ae,"DIV",{class:!0});var ie=b(O);K=D(ie,"confidence: "),Z=D(ie,J),ne=D(ie,"%"),ie.forEach(h),re=w(ae),R=p(ae,"DIV",{class:!0});var _e=b(R);oe=D(_e,"timeframe: "),$=D(_e,Q),_e.forEach(h),ae.forEach(h),ee=w(u),N&&N.l(u),W=w(u),A&&A.l(u),F=w(u),S=p(u,"DIV",{class:!0});var G=b(S);z=p(G,"A",{class:!0,href:!0});var Ee=b(z);fe=D(Ee,"Open full"),Ee.forEach(h),ue=w(G),L=p(G,"A",{class:!0,href:!0});var Ie=b(L);ce=D(Ie,"Relations"),Ie.forEach(h),he=w(G),B=p(G,"A",{class:!0,href:!0});var xe=b(B);de=D(xe,"Promote"),xe.forEach(h),G.forEach(h),this.h()},h(){_(l,"class","text-sm text-neutral-400"),_(v,"class","text-xl font-semibold"),_(j,"class","text-sm whitespace-pre-wrap"),_(O,"class","text-xs text-neutral-400"),_(R,"class","text-xs text-neutral-400"),_(x,"class","grid grid-cols-2 gap-2"),_(z,"class","px-3 py-2 rounded bg-neutral-900 hover:bg-neutral-800"),_(z,"href",te=`/manifold/thoughts/${f[0]}`),_(L,"class","px-3 py-2 rounded bg-neutral-900 hover:bg-neutral-800"),_(L,"href",le=`/manifold/relations/${f[0]}`),_(B,"class","px-3 py-2 rounded bg-neutral-900 hover:bg-neutral-800"),_(B,"href",se=`/manifold/promote/${f[0]}`),_(S,"class","flex gap-2")},m(u,m){C(u,e,m),c(e,l),c(l,s),c(l,n),c(l,o),c(e,i),c(e,v),c(v,d),c(e,k),T&&T.m(e,null),C(u,M,m),C(u,j,m),c(j,E),C(u,I,m),C(u,x,m),c(x,O),c(O,K),c(O,Z),c(O,ne),c(x,re),c(x,R),c(R,oe),c(R,$),C(u,ee,m),N&&N.m(u,m),C(u,W,m),A&&A.m(u,m),C(u,F,m),C(u,S,m),c(S,z),c(z,fe),c(S,ue),c(S,L),c(L,ce),c(S,he),c(S,B),c(B,de)},p(u,m){var U,X;m&2&&t!==(t=u[1].type+"")&&q(s,t),m&2&&r!==(r=u[1].status+"")&&q(o,r),m&2&&a!==(a=u[1].title+"")&&q(d,a),(U=u[1].tickers)!=null&&U.length?T?T.p(u,m):(T=Te(u),T.c(),T.m(e,null)):T&&(T.d(1),T=null),m&2&&P!==(P=u[1].content+"")&&q(E,P),m&2&&J!==(J=Math.round((u[1].confidence_score||0)*100)+"")&&q(Z,J),m&2&&Q!==(Q=(u[1].timeframe||"-")+"")&&q($,Q),(X=u[1].tags)!=null&&X.length?N?N.p(u,m):(N=Ae(u),N.c(),N.m(W.parentNode,W)):N&&(N.d(1),N=null),u[2].length?A?A.p(u,m):(A=Pe(u),A.c(),A.m(F.parentNode,F)):A&&(A.d(1),A=null),m&1&&te!==(te=`/manifold/thoughts/${u[0]}`)&&_(z,"href",te),m&1&&le!==(le=`/manifold/relations/${u[0]}`)&&_(L,"href",le),m&1&&se!==(se=`/manifold/promote/${u[0]}`)&&_(B,"href",se)},d(u){u&&(h(e),h(M),h(j),h(I),h(x),h(ee),h(W),h(F),h(S)),T&&T.d(),N&&N.d(u),A&&A.d(u)}}}function Fe(f){let e,l="Loading…";return{c(){e=g("div"),e.textContent=l,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-186sx6p"&&(e.textContent=l),this.h()},h(){_(e,"class","text-neutral-400")},m(t,s){C(t,e,s)},p:me,d(t){t&&h(e)}}}function Te(f){let e,l=H(f[1].tickers),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ne(we(f,l,s));return{c(){e=g("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=p(s,"DIV",{class:!0});var n=b(e);for(let r=0;r<t.length;r+=1)t[r].l(n);n.forEach(h),this.h()},h(){_(e,"class","mt-1 flex flex-wrap gap-1")},m(s,n){C(s,e,n);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(s,n){if(n&2){l=H(s[1].tickers);let r;for(r=0;r<l.length;r+=1){const o=we(s,l,r);t[r]?t[r].p(o,n):(t[r]=Ne(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){s&&h(e),pe(t,s)}}}function Ne(f){let e,l=f[15]+"",t;return{c(){e=g("span"),t=V(l),this.h()},l(s){e=p(s,"SPAN",{class:!0});var n=b(e);t=D(n,l),n.forEach(h),this.h()},h(){_(e,"class","text-xs bg-neutral-800 rounded px-2 py-0.5")},m(s,n){C(s,e,n),c(e,t)},p(s,n){n&2&&l!==(l=s[15]+"")&&q(t,l)},d(s){s&&h(e)}}}function Ae(f){let e,l,t="Tags",s,n,r=H(f[1].tags),o=[];for(let i=0;i<r.length;i+=1)o[i]=Oe(Ve(f,r,i));return{c(){e=g("div"),l=g("div"),l.textContent=t,s=y(),n=g("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=p(i,"DIV",{});var v=b(e);l=p(v,"DIV",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-shx6o7"&&(l.textContent=t),s=w(v),n=p(v,"DIV",{class:!0});var a=b(n);for(let d=0;d<o.length;d+=1)o[d].l(a);a.forEach(h),v.forEach(h),this.h()},h(){_(l,"class","text-xs text-neutral-500 mb-1"),_(n,"class","flex gap-1 flex-wrap")},m(i,v){C(i,e,v),c(e,l),c(e,s),c(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(i,v){if(v&2){r=H(i[1].tags);let a;for(a=0;a<r.length;a+=1){const d=Ve(i,r,a);o[a]?o[a].p(d,v):(o[a]=Oe(d),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},d(i){i&&h(e),pe(o,i)}}}function Oe(f){let e,l=f[12]+"",t;return{c(){e=g("span"),t=V(l),this.h()},l(s){e=p(s,"SPAN",{class:!0});var n=b(e);t=D(n,l),n.forEach(h),this.h()},h(){_(e,"class","text-xs bg-neutral-800 rounded px-2 py-0.5")},m(s,n){C(s,e,n),c(e,t)},p(s,n){n&2&&l!==(l=s[12]+"")&&q(t,l)},d(s){s&&h(e)}}}function Pe(f){let e,l,t="Similar",s,n,r=H(f[2]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Se(De(f,r,i));return{c(){e=g("div"),l=g("div"),l.textContent=t,s=y(),n=g("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=p(i,"DIV",{});var v=b(e);l=p(v,"DIV",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-1wo6ciz"&&(l.textContent=t),s=w(v),n=p(v,"DIV",{class:!0});var a=b(n);for(let d=0;d<o.length;d+=1)o[d].l(a);a.forEach(h),v.forEach(h),this.h()},h(){_(l,"class","text-xs text-neutral-500 mb-1"),_(n,"class","space-y-1")},m(i,v){C(i,e,v),c(e,l),c(e,s),c(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(i,v){if(v&4){r=H(i[2]);let a;for(a=0;a<r.length;a+=1){const d=De(i,r,a);o[a]?o[a].p(d,v):(o[a]=Se(d),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},d(i){i&&h(e),pe(o,i)}}}function Se(f){let e,l,t=f[9].title+"",s,n,r,o,i,v;return{c(){e=g("div"),l=g("div"),s=V(t),n=y(),r=g("a"),o=V("Open"),v=y(),this.h()},l(a){e=p(a,"DIV",{class:!0});var d=b(e);l=p(d,"DIV",{class:!0});var k=b(l);s=D(k,t),k.forEach(h),n=w(d),r=p(d,"A",{class:!0,href:!0});var M=b(r);o=D(M,"Open"),M.forEach(h),v=w(d),d.forEach(h),this.h()},h(){_(l,"class","truncate"),_(r,"class","px-2 py-1 rounded bg-neutral-900 hover:bg-neutral-800"),_(r,"href",i=`/manifold/thoughts/${f[9].thought_id}`),_(e,"class","flex items-center justify-between text-sm")},m(a,d){C(a,e,d),c(e,l),c(l,s),c(e,n),c(e,r),c(r,o),c(e,v)},p(a,d){d&4&&t!==(t=a[9].title+"")&&q(s,t),d&4&&i!==(i=`/manifold/thoughts/${a[9].thought_id}`)&&_(r,"href",i)},d(a){a&&h(e)}}}function Ge(f){let e,l=f[0]&&ye(f);return{c(){l&&l.c(),e=Ce()},l(t){l&&l.l(t),e=Ce()},m(t,s){l&&l.m(t,s),C(t,e,s)},p(t,[s]){t[0]?l?l.p(t,s):(l=ye(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:me,o:me,d(t){t&&h(e),l&&l.d(t)}}}function He(f,e,l){let{thoughtId:t=null}=e,{onClose:s=null}=e,n=null,r=[],o=!1;async function i(){if(t){l(3,o=!0);try{l(1,n=await Ue(t));const k=await Ke(t,5);l(2,r=k.similar||[])}finally{l(3,o=!1)}}}function v(){s&&s()}function a(k){k.key==="Escape"&&v()}ze(()=>(window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)));function d(k){Re.call(this,f,k)}return f.$$set=k=>{"thoughtId"in k&&l(0,t=k.thoughtId),"onClose"in k&&l(5,s=k.onClose)},f.$$.update=()=>{f.$$.dirty&1&&i()},[t,n,r,o,v,s,d]}class Ze extends Me{constructor(e){super(),je(this,e,He,Ge,qe,{thoughtId:0,onClose:5})}}export{Ze as T};
