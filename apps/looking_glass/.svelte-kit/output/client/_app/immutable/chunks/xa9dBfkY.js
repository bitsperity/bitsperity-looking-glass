import{S as X,i as Y,s as Z,n as U,d as b,r as x,m as c,y as z,b as I,c as y,q as w,e as C,f as E,h as N,j as S,k as M,R as $,o as ee,u as te,K as se,a as le,I as ne,g as ae,t as re}from"./DnBpi1Qd.js";import{e as H}from"./B5jFdsvg.js";import"./IHki7fMi.js";import{w as oe,x as ie,y as ue,z as ce}from"./DhtULb7M.js";function K(s,e,t){const l=s.slice();return l[23]=e[t],l[25]=t,l}function V(s){let e,t='<div class="w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>';return{c(){e=S("div"),e.innerHTML=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1cem4lw"&&(e.innerHTML=t),this.h()},h(){c(e,"class","absolute right-3 top-1/2 transform -translate-y-1/2")},m(l,r){I(l,e,r)},d(l){l&&b(e)}}}function j(s){let e,t=H(s[6]),l=[];for(let r=0;r<t.length;r+=1)l[r]=B(K(s,t,r));return{c(){e=S("ul");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=C(r,"UL",{id:!0,role:!0,class:!0});var f=E(e);for(let n=0;n<l.length;n+=1)l[n].l(f);f.forEach(b),this.h()},h(){c(e,"id","suggestions-list"),c(e,"role","listbox"),c(e,"class","absolute z-50 w-full mt-1 bg-neutral-800 border border-neutral-700 rounded shadow-lg max-h-60 overflow-y-auto")},m(r,f){I(r,e,f);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(r,f){if(f&1216){t=H(r[6]);let n;for(n=0;n<t.length;n+=1){const o=K(r,t,n);l[n]?l[n].p(o,f):(l[n]=B(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(r){r&&b(e),te(l,r)}}}function B(s){let e,t,l=s[23]+"",r,f,n,o,i,u;function h(){return s[19](s[23])}return{c(){e=S("li"),t=S("span"),r=re(l),f=M(),this.h()},l(m){e=C(m,"LI",{role:!0,"aria-selected":!0,class:!0});var g=E(e);t=C(g,"SPAN",{class:!0});var _=E(t);r=ae(_,l),_.forEach(b),f=N(g),g.forEach(b),this.h()},h(){c(t,"class","text-neutral-100"),c(e,"role","option"),c(e,"aria-selected",n=s[25]===s[7]),c(e,"class",o="px-3 py-2 cursor-pointer hover:bg-neutral-700 "+(s[25]===s[7]?"bg-neutral-700":""))},m(m,g){I(m,e,g),y(e,t),y(t,r),y(e,f),i||(u=w(e,"mousedown",ne(h)),i=!0)},p(m,g){s=m,g&64&&l!==(l=s[23]+"")&&le(r,l),g&128&&n!==(n=s[25]===s[7])&&c(e,"aria-selected",n),g&128&&o!==(o="px-3 py-2 cursor-pointer hover:bg-neutral-700 "+(s[25]===s[7]?"bg-neutral-700":""))&&c(e,"class",o)},d(m){m&&b(e),i=!1,u()}}}function fe(s){let e,t,l,r,f,n,o=s[1]&&V(),i=s[5]&&j(s);return{c(){e=S("div"),t=S("input"),l=M(),o&&o.c(),r=M(),i&&i.c(),this.h()},l(u){e=C(u,"DIV",{class:!0});var h=E(e);t=C(h,"INPUT",{type:!0,placeholder:!0,class:!0,autocomplete:!0,role:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0}),l=N(h),o&&o.l(h),r=N(h),i&&i.l(h),h.forEach(b),this.h()},h(){c(t,"type","text"),c(t,"placeholder",s[2]),t.disabled=s[4],c(t,"class","w-full px-3 py-2 bg-neutral-900 border border-neutral-700 rounded text-neutral-100 placeholder-neutral-500 focus:outline-none focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),c(t,"autocomplete","off"),c(t,"role","combobox"),c(t,"aria-autocomplete","list"),c(t,"aria-expanded",s[5]),c(t,"aria-controls","suggestions-list"),c(e,"class","relative")},m(u,h){I(u,e,h),y(e,t),s[16](t),z(t,s[0]),y(e,l),o&&o.m(e,null),y(e,r),i&&i.m(e,null),f||(n=[w(t,"input",s[17]),w(t,"input",s[9]),w(t,"keydown",s[11]),w(t,"blur",s[12]),w(t,"focus",s[18])],f=!0)},p(u,[h]){h&4&&c(t,"placeholder",u[2]),h&16&&(t.disabled=u[4]),h&32&&c(t,"aria-expanded",u[5]),h&1&&t.value!==u[0]&&z(t,u[0]),u[1]?o||(o=V(),o.c(),o.m(e,r)):o&&(o.d(1),o=null),u[5]?i?i.p(u,h):(i=j(u),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:U,o:U,d(u){u&&b(e),s[16](null),o&&o.d(),i&&i.d(),f=!1,x(n)}}}function he(s,e,t){let{value:l=""}=e,{placeholder:r=""}=e,{suggestions:f=[]}=e,{fetchSuggestions:n=null}=e,{minChars:o=1}=e,{maxSuggestions:i=10}=e,{loading:u=!1}=e,{disabled:h=!1}=e;const m=$();let g=!1,_=[],d=-1,p,F=null;async function R(a){n&&(F&&clearTimeout(F),F=setTimeout(async()=>{t(1,u=!0);try{const k=await n(a);t(6,_=k.slice(0,i)),t(5,g=_.length>0)}catch(k){console.error("Failed to fetch suggestions:",k)}finally{t(1,u=!1)}},300))}function P(){const a=l.trim();if(a.length<o){t(5,g=!1);return}n?R(a):(t(6,_=f.filter(k=>k.toLowerCase().includes(a.toLowerCase())).slice(0,i)),t(5,g=_.length>0)),t(7,d=-1)}function A(a){t(0,l=a),t(5,g=!1),t(7,d=-1),m("select",a),p==null||p.blur()}function q(a){if(g)switch(a.key){case"ArrowDown":a.preventDefault(),t(7,d=Math.min(d+1,_.length-1));break;case"ArrowUp":a.preventDefault(),t(7,d=Math.max(d-1,-1));break;case"Enter":a.preventDefault(),d>=0?A(_[d]):m("submit",l);break;case"Escape":t(5,g=!1),t(7,d=-1);break}}function G(){setTimeout(()=>{t(5,g=!1),t(7,d=-1)},200)}function J(a){se[a?"unshift":"push"](()=>{p=a,t(8,p)})}function O(){l=this.value,t(0,l)}const Q=()=>{l.length>=o&&P()},W=a=>A(a);return s.$$set=a=>{"value"in a&&t(0,l=a.value),"placeholder"in a&&t(2,r=a.placeholder),"suggestions"in a&&t(13,f=a.suggestions),"fetchSuggestions"in a&&t(14,n=a.fetchSuggestions),"minChars"in a&&t(3,o=a.minChars),"maxSuggestions"in a&&t(15,i=a.maxSuggestions),"loading"in a&&t(1,u=a.loading),"disabled"in a&&t(4,h=a.disabled)},[l,u,r,o,h,g,_,d,p,P,A,q,G,f,n,i,J,O,Q,W]}class be extends X{constructor(e){super(),Y(this,e,he,fe,Z,{value:0,placeholder:2,suggestions:13,fetchSuggestions:14,minChars:3,maxSuggestions:15,loading:1,disabled:4})}}let D=null,v=null,L=null,T=null;async function pe(){if(D)return D;try{return D=(await ie()).tickers,D}catch(s){return console.error("Failed to fetch ticker suggestions:",s),[]}}async function we(s){if(!v)try{v=(await oe()).topics}catch(e){console.error("Failed to fetch topic suggestions:",e),v=[]}return s?(v||[]).filter(e=>e.toLowerCase().includes(s.toLowerCase())):v||[]}async function ye(s){if(!L)try{L=(await ue()).events}catch(e){console.error("Failed to fetch event name suggestions:",e),L=[]}return s?(L||[]).filter(e=>e.name.toLowerCase().includes(s.toLowerCase())).map(e=>e.name):(L||[]).map(e=>e.name)}async function Ce(s){if(!T)try{T=(await ce()).categories}catch(e){console.error("Failed to fetch pattern category suggestions:",e),T=[]}return s?(T||[]).filter(e=>e.toLowerCase().includes(s.toLowerCase())):T||[]}export{be as A,pe as a,we as b,Ce as c,ye as f};
