import{S as ue,i as ce,s as fe,K as de,L as pe,d as f,B as se,r as he,v as W,w as X,M as me,x as ae,y as Z,z as _e,b as z,c as r,C as re,q as ee,m as d,e as p,f as D,o as j,h as $,D as ie,j as h,k as w,E as oe,n as U,a as Y,g as q,t as B,u as ve,A as be}from"../chunks/BeOz57Dq.js";import{e as te}from"../chunks/D_ZdN6Q8.js";import"../chunks/IHki7fMi.js";import{e as ge}from"../chunks/ClFG0zlK.js";import{E as xe}from"../chunks/a2N5t46R.js";import{A as ke,f as Ee}from"../chunks/BXfZ-OPp.js";function le(i,e,l){const t=i.slice();return t[8]=e[l].node,t[9]=e[l].impact,t[10]=e[l].paths,t}function Ce(i){let e,l,t="Event",n,s,a,u,v,V="Impacted Entities",x,b;s=new xe({props:{event:i[4].event}});function S(o,k){return o[4].impacted_entities.length===0?Ve:De}let I=S(i),_=I(i);return{c(){e=h("div"),l=h("h2"),l.textContent=t,n=w(),oe(s.$$.fragment),a=w(),u=h("div"),v=h("h2"),v.textContent=V,x=w(),_.c(),this.h()},l(o){e=p(o,"DIV",{class:!0});var k=D(e);l=p(k,"H2",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-do9o8r"&&(l.textContent=t),n=$(k),ie(s.$$.fragment,k),k.forEach(f),a=$(o),u=p(o,"DIV",{});var m=D(u);v=p(m,"H2",{class:!0,"data-svelte-h":!0}),j(v)!=="svelte-11av6p"&&(v.textContent=V),x=$(m),_.l(m),m.forEach(f),this.h()},h(){d(l,"class","text-xl font-semibold text-neutral-200 mb-3"),d(e,"class","mb-6"),d(v,"class","text-xl font-semibold text-neutral-200 mb-3")},m(o,k){z(o,e,k),r(e,l),r(e,n),re(s,e,null),z(o,a,k),z(o,u,k),r(u,v),r(u,x),_.m(u,null),b=!0},p(o,k){const m={};k&16&&(m.event=o[4].event),s.$set(m),I===(I=S(o))&&_?_.p(o,k):(_.d(1),_=I(o),_&&(_.c(),_.m(u,null)))},i(o){b||(X(s.$$.fragment,o),b=!0)},o(o){W(s.$$.fragment,o),b=!1},d(o){o&&(f(e),f(a),f(u)),se(s),_.d()}}}function Ie(i){let e,l,t;return{c(){e=h("div"),l=B("Error: "),t=B(i[3]),this.h()},l(n){e=p(n,"DIV",{class:!0});var s=D(e);l=q(s,"Error: "),t=q(s,i[3]),s.forEach(f),this.h()},h(){d(e,"class","text-red-400")},m(n,s){z(n,e,s),r(e,l),r(e,t)},p(n,s){s&8&&Y(t,n[3])},i:U,o:U,d(n){n&&f(e)}}}function ye(i){let e,l="Analyzing...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1f91k8w"&&(e.textContent=l),this.h()},h(){d(e,"class","text-neutral-400")},m(t,n){z(t,e,n)},p:U,i:U,o:U,d(t){t&&f(e)}}}function De(i){let e,l=te(i[4].impacted_entities),t=[];for(let n=0;n<l.length;n+=1)t[n]=ne(le(i,l,n));return{c(){e=h("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=p(n,"DIV",{class:!0});var s=D(e);for(let a=0;a<t.length;a+=1)t[a].l(s);s.forEach(f),this.h()},h(){d(e,"class","space-y-3")},m(n,s){z(n,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(n,s){if(s&16){l=te(n[4].impacted_entities);let a;for(a=0;a<l.length;a+=1){const u=le(n,l,a);t[a]?t[a].p(u,s):(t[a]=ne(u),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(n){n&&f(e),ve(t,n)}}}function Ve(i){let e,l="No impacted entities found";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-gqtsd2"&&(e.textContent=l),this.h()},h(){d(e,"class","text-neutral-400")},m(t,n){z(t,e,n)},p:U,d(t){t&&f(e)}}}function ne(i){let e,l,t,n,s=(i[8].properties.name||i[8].properties.ticker||i[8].id)+"",a,u,v,V,x,b,S=i[9].toFixed(2)+"",I,_,o,k,m=i[10]+"",H,N,P,F,g,E;return{c(){e=h("div"),l=h("div"),t=h("div"),n=h("h3"),a=B(s),u=w(),v=h("div"),V=h("span"),x=B("Impact Score: "),b=h("strong"),I=B(S),_=w(),o=h("span"),k=B("Indirect Paths: "),H=B(m),N=w(),P=h("a"),F=B("Timeline"),E=w(),this.h()},l(y){e=p(y,"DIV",{class:!0});var A=D(e);l=p(A,"DIV",{class:!0});var K=D(l);t=p(K,"DIV",{class:!0});var R=D(t);n=p(R,"H3",{class:!0});var G=D(n);a=q(G,s),G.forEach(f),u=$(R),v=p(R,"DIV",{class:!0});var O=D(v);V=p(O,"SPAN",{});var T=D(V);x=q(T,"Impact Score: "),b=p(T,"STRONG",{class:!0});var M=D(b);I=q(M,S),M.forEach(f),T.forEach(f),_=$(O),o=p(O,"SPAN",{});var c=D(o);k=q(c,"Indirect Paths: "),H=q(c,m),c.forEach(f),O.forEach(f),R.forEach(f),N=$(K),P=p(K,"A",{href:!0,class:!0});var C=D(P);F=q(C,"Timeline"),C.forEach(f),K.forEach(f),E=$(A),A.forEach(f),this.h()},h(){d(n,"class","text-lg font-medium text-neutral-100 mb-1"),d(b,"class","text-neutral-100"),d(v,"class","flex items-center gap-4 text-sm text-neutral-400"),d(t,"class","flex-1"),d(P,"href",g="/ariadne/timeline?ticker="+i[8].properties.ticker),d(P,"class","px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm"),d(l,"class","flex items-start justify-between"),d(e,"class","bg-neutral-900 rounded border border-neutral-800 p-4")},m(y,A){z(y,e,A),r(e,l),r(l,t),r(t,n),r(n,a),r(t,u),r(t,v),r(v,V),r(V,x),r(V,b),r(b,I),r(v,_),r(v,o),r(o,k),r(o,H),r(l,N),r(l,P),r(P,F),r(e,E)},p(y,A){A&16&&s!==(s=(y[8].properties.name||y[8].properties.ticker||y[8].id)+"")&&Y(a,s),A&16&&S!==(S=y[9].toFixed(2)+"")&&Y(I,S),A&16&&m!==(m=y[10]+"")&&Y(H,m),A&16&&g!==(g="/ariadne/timeline?ticker="+y[8].properties.ticker)&&d(P,"href",g)},d(y){y&&f(e)}}}function Ae(i){let e,l,t="Impact Analysis",n,s,a,u,v="Event Query",V,x,b,S,I,_,o="Top K Entities",k,m,H,N,P="Analyze Impact",F,g,E,y,A,K;function R(c){i[6](c)}let G={fetchSuggestions:Ee,placeholder:"e.g., Export, Rate Hike, or select from existing events"};i[0]!==void 0&&(G.value=i[0]),x=new ke({props:G}),de.push(()=>pe(x,"value",R)),x.$on("select",i[5]);const O=[ye,Ie,Ce],T=[];function M(c,C){return c[2]?0:c[3]?1:c[4]?2:-1}return~(g=M(i))&&(E=T[g]=O[g](i)),{c(){e=h("div"),l=h("h1"),l.textContent=t,n=w(),s=h("div"),a=h("div"),u=h("label"),u.textContent=v,V=w(),oe(x.$$.fragment),S=w(),I=h("div"),_=h("label"),_.textContent=o,k=w(),m=h("input"),H=w(),N=h("button"),N.textContent=P,F=w(),E&&E.c(),this.h()},l(c){e=p(c,"DIV",{class:!0});var C=D(e);l=p(C,"H1",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-16jdm3g"&&(l.textContent=t),n=$(C),s=p(C,"DIV",{class:!0});var Q=D(s);a=p(Q,"DIV",{});var L=D(a);u=p(L,"LABEL",{class:!0,"data-svelte-h":!0}),j(u)!=="svelte-gs5uib"&&(u.textContent=v),V=$(L),ie(x.$$.fragment,L),L.forEach(f),S=$(Q),I=p(Q,"DIV",{});var J=D(I);_=p(J,"LABEL",{class:!0,"data-svelte-h":!0}),j(_)!=="svelte-okx3y8"&&(_.textContent=o),k=$(J),m=p(J,"INPUT",{type:!0,min:!0,max:!0,class:!0}),J.forEach(f),Q.forEach(f),H=$(C),N=p(C,"BUTTON",{class:!0,"data-svelte-h":!0}),j(N)!=="svelte-b40c51"&&(N.textContent=P),F=$(C),E&&E.l(C),C.forEach(f),this.h()},h(){d(l,"class","text-3xl font-bold text-neutral-100 mb-6"),d(u,"class","block text-sm font-medium text-neutral-300 mb-1"),d(_,"class","block text-sm font-medium text-neutral-300 mb-1"),d(m,"type","number"),d(m,"min","1"),d(m,"max","50"),d(m,"class","w-full px-3 py-2 bg-neutral-900 border border-neutral-700 rounded text-neutral-100 focus:outline-none focus:border-indigo-500"),d(s,"class","mb-6 grid grid-cols-1 md:grid-cols-2 gap-3"),d(N,"class","px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white mb-6"),d(e,"class","max-w-7xl mx-auto p-6")},m(c,C){z(c,e,C),r(e,l),r(e,n),r(e,s),r(s,a),r(a,u),r(a,V),re(x,a,null),r(s,S),r(s,I),r(I,_),r(I,k),r(I,m),Z(m,i[1]),r(e,H),r(e,N),r(e,F),~g&&T[g].m(e,null),y=!0,A||(K=[ee(m,"input",i[7]),ee(N,"click",i[5])],A=!0)},p(c,[C]){const Q={};!b&&C&1&&(b=!0,Q.value=c[0],me(()=>b=!1)),x.$set(Q),C&2&&ae(m.value)!==c[1]&&Z(m,c[1]);let L=g;g=M(c),g===L?~g&&T[g].p(c,C):(E&&(be(),W(T[L],1,1,()=>{T[L]=null}),_e()),~g?(E=T[g],E?E.p(c,C):(E=T[g]=O[g](c),E.c()),X(E,1),E.m(e,null)):E=null)},i(c){y||(X(x.$$.fragment,c),X(E),y=!0)},o(c){W(x.$$.fragment,c),W(E),y=!1},d(c){c&&f(e),se(x),~g&&T[g].d(),A=!1,he(K)}}}function $e(i,e,l){let t="",n=10,s=!1,a=null,u=null;async function v(){if(t){l(2,s=!0),l(3,a=null);try{l(4,u=await ge({event_query:t,k:n}))}catch(b){l(3,a=(b==null?void 0:b.message)??"Failed to analyze impact")}finally{l(2,s=!1)}}}function V(b){t=b,l(0,t)}function x(){n=ae(this.value),l(1,n)}return[t,n,s,a,u,v,V,x]}class He extends ue{constructor(e){super(),ce(this,e,$e,Ae,fe,{})}}export{He as component};
