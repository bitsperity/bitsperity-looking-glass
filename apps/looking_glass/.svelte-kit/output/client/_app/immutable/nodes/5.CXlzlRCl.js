import{S as Pe,i as Se,s as je,n as Ee,d as p,r as qe,a as H,b as te,c as t,q as xe,m as c,e as u,f as D,o as M,h as L,g as y,j as f,k as w,t as A,p as Fe,u as Ce}from"../chunks/DnBpi1Qd.js";import{e as me}from"../chunks/B5jFdsvg.js";import"../chunks/IHki7fMi.js";import{f as He,c as Ue,r as Be}from"../chunks/ClFG0zlK.js";function Ie(o,e,l){const n=o.slice();return n[13]=e[l],n}function Ve(o,e,l){const n=o.slice();return n[16]=e[l].rel_type,n[17]=e[l].count,n}function Le(o,e,l){const n=o.slice();return n[20]=e[l].label,n[17]=e[l].count,n}function Ge(o){let e,l,n="Detailed Statistics",d,r,s,h,_="Temporal Coverage",b,v,m=o[1].temporal_coverage_pct+"",E,g,C,V,q,le="Avg Confidence",N,Z,Q=o[1].avg_confidence?(o[1].avg_confidence*100).toFixed(1)+"%":"N/A",$,se,J,T,W="Edges with Confidence",fe,X,U=o[1].edges_with_confidence+"",ne,ae,F,S,j,he="Node Stats",re,P,ee,B,K,ve="Edge Stats",_e,Y,G=me(o[1].node_stats),k=[];for(let a=0;a<G.length;a+=1)k[a]=we(Le(o,G,a));let R=me(o[1].edge_stats),I=[];for(let a=0;a<R.length;a+=1)I[a]=ye(Ve(o,R,a));return{c(){e=f("div"),l=f("h2"),l.textContent=n,d=w(),r=f("div"),s=f("div"),h=f("div"),h.textContent=_,b=w(),v=f("div"),E=A(m),g=A("%"),C=w(),V=f("div"),q=f("div"),q.textContent=le,N=w(),Z=f("div"),$=A(Q),se=w(),J=f("div"),T=f("div"),T.textContent=W,fe=w(),X=f("div"),ne=A(U),ae=w(),F=f("div"),S=f("div"),j=f("h3"),j.textContent=he,re=w(),P=f("div");for(let a=0;a<k.length;a+=1)k[a].c();ee=w(),B=f("div"),K=f("h3"),K.textContent=ve,_e=w(),Y=f("div");for(let a=0;a<I.length;a+=1)I[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var x=D(e);l=u(x,"H2",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-1pa4uh2"&&(l.textContent=n),d=L(x),r=u(x,"DIV",{class:!0});var i=D(r);s=u(i,"DIV",{class:!0});var O=D(s);h=u(O,"DIV",{class:!0,"data-svelte-h":!0}),M(h)!=="svelte-26l46r"&&(h.textContent=_),b=L(O),v=u(O,"DIV",{class:!0});var oe=D(v);E=y(oe,m),g=y(oe,"%"),oe.forEach(p),O.forEach(p),C=L(i),V=u(i,"DIV",{class:!0});var de=D(V);q=u(de,"DIV",{class:!0,"data-svelte-h":!0}),M(q)!=="svelte-85oed"&&(q.textContent=le),N=L(de),Z=u(de,"DIV",{class:!0});var z=D(Z);$=y(z,Q),z.forEach(p),de.forEach(p),se=L(i),J=u(i,"DIV",{class:!0});var ie=D(J);T=u(ie,"DIV",{class:!0,"data-svelte-h":!0}),M(T)!=="svelte-4o130l"&&(T.textContent=W),fe=L(ie),X=u(ie,"DIV",{class:!0});var pe=D(X);ne=y(pe,U),pe.forEach(p),ie.forEach(p),i.forEach(p),ae=L(x),F=u(x,"DIV",{class:!0});var ce=D(F);S=u(ce,"DIV",{class:!0});var be=D(S);j=u(be,"H3",{class:!0,"data-svelte-h":!0}),M(j)!=="svelte-1x0qmtz"&&(j.textContent=he),re=L(be),P=u(be,"DIV",{class:!0});var De=D(P);for(let ue=0;ue<k.length;ue+=1)k[ue].l(De);De.forEach(p),be.forEach(p),ee=L(ce),B=u(ce,"DIV",{class:!0});var ge=D(B);K=u(ge,"H3",{class:!0,"data-svelte-h":!0}),M(K)!=="svelte-14oq1aa"&&(K.textContent=ve),_e=L(ge),Y=u(ge,"DIV",{class:!0});var ke=D(Y);for(let ue=0;ue<I.length;ue+=1)I[ue].l(ke);ke.forEach(p),ge.forEach(p),ce.forEach(p),x.forEach(p),this.h()},h(){c(l,"class","text-xl font-semibold text-neutral-200 mb-3"),c(h,"class","text-sm text-neutral-400"),c(v,"class","text-2xl font-semibold text-neutral-100"),c(s,"class","bg-neutral-900 rounded border border-neutral-800 p-4"),c(q,"class","text-sm text-neutral-400"),c(Z,"class","text-2xl font-semibold text-neutral-100"),c(V,"class","bg-neutral-900 rounded border border-neutral-800 p-4"),c(T,"class","text-sm text-neutral-400"),c(X,"class","text-2xl font-semibold text-neutral-100"),c(J,"class","bg-neutral-900 rounded border border-neutral-800 p-4"),c(r,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"),c(j,"class","text-lg font-semibold text-neutral-100 mb-2"),c(P,"class","space-y-1 max-h-64 overflow-y-auto"),c(S,"class","bg-neutral-900 rounded border border-neutral-800 p-4"),c(K,"class","text-lg font-semibold text-neutral-100 mb-2"),c(Y,"class","space-y-1 max-h-64 overflow-y-auto"),c(B,"class","bg-neutral-900 rounded border border-neutral-800 p-4"),c(F,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),c(e,"class","mb-8")},m(a,x){te(a,e,x),t(e,l),t(e,d),t(e,r),t(r,s),t(s,h),t(s,b),t(s,v),t(v,E),t(v,g),t(r,C),t(r,V),t(V,q),t(V,N),t(V,Z),t(Z,$),t(r,se),t(r,J),t(J,T),t(J,fe),t(J,X),t(X,ne),t(e,ae),t(e,F),t(F,S),t(S,j),t(S,re),t(S,P);for(let i=0;i<k.length;i+=1)k[i]&&k[i].m(P,null);t(F,ee),t(F,B),t(B,K),t(B,_e),t(B,Y);for(let i=0;i<I.length;i+=1)I[i]&&I[i].m(Y,null)},p(a,x){if(x&2&&m!==(m=a[1].temporal_coverage_pct+"")&&H(E,m),x&2&&Q!==(Q=a[1].avg_confidence?(a[1].avg_confidence*100).toFixed(1)+"%":"N/A")&&H($,Q),x&2&&U!==(U=a[1].edges_with_confidence+"")&&H(ne,U),x&2){G=me(a[1].node_stats);let i;for(i=0;i<G.length;i+=1){const O=Le(a,G,i);k[i]?k[i].p(O,x):(k[i]=we(O),k[i].c(),k[i].m(P,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=G.length}if(x&2){R=me(a[1].edge_stats);let i;for(i=0;i<R.length;i+=1){const O=Ve(a,R,i);I[i]?I[i].p(O,x):(I[i]=ye(O),I[i].c(),I[i].m(Y,null))}for(;i<I.length;i+=1)I[i].d(1);I.length=R.length}},d(a){a&&p(e),Ce(k,a),Ce(I,a)}}}function Oe(o){let e,l="Loading stats...";return{c(){e=f("div"),e.textContent=l,this.h()},l(n){e=u(n,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-rola0k"&&(e.textContent=l),this.h()},h(){c(e,"class","text-neutral-400")},m(n,d){te(n,e,d)},p:Ee,d(n){n&&p(e)}}}function we(o){let e,l,n=o[20]+"",d,r,s,h=o[17]+"",_,b;return{c(){e=f("div"),l=f("span"),d=A(n),r=w(),s=f("span"),_=A(h),b=w(),this.h()},l(v){e=u(v,"DIV",{class:!0});var m=D(e);l=u(m,"SPAN",{class:!0});var E=D(l);d=y(E,n),E.forEach(p),r=L(m),s=u(m,"SPAN",{class:!0});var g=D(s);_=y(g,h),g.forEach(p),b=L(m),m.forEach(p),this.h()},h(){c(l,"class","text-neutral-300"),c(s,"class","font-semibold text-neutral-100"),c(e,"class","flex items-center justify-between text-sm")},m(v,m){te(v,e,m),t(e,l),t(l,d),t(e,r),t(e,s),t(s,_),t(e,b)},p(v,m){m&2&&n!==(n=v[20]+"")&&H(d,n),m&2&&h!==(h=v[17]+"")&&H(_,h)},d(v){v&&p(e)}}}function ye(o){let e,l,n=o[16]+"",d,r,s,h=o[17]+"",_,b;return{c(){e=f("div"),l=f("span"),d=A(n),r=w(),s=f("span"),_=A(h),b=w(),this.h()},l(v){e=u(v,"DIV",{class:!0});var m=D(e);l=u(m,"SPAN",{class:!0});var E=D(l);d=y(E,n),E.forEach(p),r=L(m),s=u(m,"SPAN",{class:!0});var g=D(s);_=y(g,h),g.forEach(p),b=L(m),m.forEach(p),this.h()},h(){c(l,"class","text-neutral-300"),c(s,"class","font-semibold text-neutral-100"),c(e,"class","flex items-center justify-between text-sm")},m(v,m){te(v,e,m),t(e,l),t(l,d),t(e,r),t(e,s),t(s,_),t(e,b)},p(v,m){m&2&&n!==(n=v[16]+"")&&H(d,n),m&2&&h!==(h=v[17]+"")&&H(_,h)},d(v){v&&p(e)}}}function Ae(o){let e,l,n="✓ Graph Reset Complete",d,r,s,h=o[7].deleted.nodes+"",_,b,v=o[7].deleted.edges+"",m,E;return{c(){e=f("div"),l=f("div"),l.textContent=n,d=w(),r=f("div"),s=A("Deleted: "),_=A(h),b=A(" nodes, "),m=A(v),E=A(" edges"),this.h()},l(g){e=u(g,"DIV",{class:!0});var C=D(e);l=u(C,"DIV",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-s3q2uz"&&(l.textContent=n),d=L(C),r=u(C,"DIV",{class:!0});var V=D(r);s=y(V,"Deleted: "),_=y(V,h),b=y(V," nodes, "),m=y(V,v),E=y(V," edges"),V.forEach(p),C.forEach(p),this.h()},h(){c(l,"class","text-sm font-medium text-green-400 mb-2"),c(r,"class","text-xs text-neutral-400"),c(e,"class","mt-4 p-3 bg-green-950/50 rounded border border-green-800")},m(g,C){te(g,e,C),t(e,l),t(e,d),t(e,r),t(r,s),t(r,_),t(r,b),t(r,m),t(r,E)},p(g,C){C&128&&h!==(h=g[7].deleted.nodes+"")&&H(_,h),C&128&&v!==(v=g[7].deleted.edges+"")&&H(m,v)},d(g){g&&p(e)}}}function Te(o){let e,l,n,d=o[3].orphaned_count+"",r,s,h,_,b=o[3].deleted?"Deleted":"Preview (dry run)",v,m,E=o[3].nodes.length>0&&Re(o);return{c(){e=f("div"),l=f("div"),n=A("Found "),r=A(d),s=A(" orphaned nodes"),h=w(),_=f("div"),v=A(b),m=w(),E&&E.c(),this.h()},l(g){e=u(g,"DIV",{class:!0});var C=D(e);l=u(C,"DIV",{class:!0});var V=D(l);n=y(V,"Found "),r=y(V,d),s=y(V," orphaned nodes"),V.forEach(p),h=L(C),_=u(C,"DIV",{class:!0});var q=D(_);v=y(q,b),q.forEach(p),m=L(C),E&&E.l(C),C.forEach(p),this.h()},h(){c(l,"class","text-sm font-medium text-neutral-100 mb-2"),c(_,"class","text-xs text-neutral-500 mb-2"),c(e,"class","mt-4 p-3 bg-neutral-950 rounded border border-neutral-800")},m(g,C){te(g,e,C),t(e,l),t(l,n),t(l,r),t(l,s),t(e,h),t(e,_),t(_,v),t(e,m),E&&E.m(e,null)},p(g,C){C&8&&d!==(d=g[3].orphaned_count+"")&&H(r,d),C&8&&b!==(b=g[3].deleted?"Deleted":"Preview (dry run)")&&H(v,b),g[3].nodes.length>0?E?E.p(g,C):(E=Re(g),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(g){g&&p(e),E&&E.d()}}}function Re(o){let e,l=me(o[3].nodes),n=[];for(let d=0;d<l.length;d+=1)n[d]=Ne(Ie(o,l,d));return{c(){e=f("div");for(let d=0;d<n.length;d+=1)n[d].c();this.h()},l(d){e=u(d,"DIV",{class:!0});var r=D(e);for(let s=0;s<n.length;s+=1)n[s].l(r);r.forEach(p),this.h()},h(){c(e,"class","space-y-1 max-h-48 overflow-y-auto")},m(d,r){te(d,e,r);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(d,r){if(r&8){l=me(d[3].nodes);let s;for(s=0;s<l.length;s+=1){const h=Ie(d,l,s);n[s]?n[s].p(h,r):(n[s]=Ne(h),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(d){d&&p(e),Ce(n,d)}}}function Ne(o){let e,l=o[13].labels.join(", ")+"",n,d,r=(o[13].name||o[13].ticker||o[13].node_id)+"",s,h;return{c(){e=f("div"),n=A(l),d=A(": "),s=A(r),h=w(),this.h()},l(_){e=u(_,"DIV",{class:!0});var b=D(e);n=y(b,l),d=y(b,": "),s=y(b,r),h=L(b),b.forEach(p),this.h()},h(){c(e,"class","text-xs text-neutral-400")},m(_,b){te(_,e,b),t(e,n),t(e,d),t(e,s),t(e,h)},p(_,b){b&8&&l!==(l=_[13].labels.join(", ")+"")&&H(n,l),b&8&&r!==(r=(_[13].name||_[13].ticker||_[13].node_id)+"")&&H(s,r)},d(_){_&&p(e)}}}function ze(o){let e,l,n="Admin Tools",d,r,s,h,_="⚠️ Danger Zone: Reset Graph",b,v,m="Permanently delete ALL data in the knowledge graph. This action cannot be undone!",E,g,C,V,q,le,N,Z=o[6]?"Resetting...":"🗑️ DELETE ALL DATA",Q,$,se,J,T,W,fe="Orphaned Nodes Cleanup",X,U,ne="Find and optionally delete nodes with no edges (isolated entities).",ae,F,S,j,he,re,P,ee=o[4]?"Running...":"Run Cleanup",B,K,ve,_e;function Y(a,x){if(a[0])return Oe;if(a[1])return Ge}let G=Y(o),k=G&&G(o),R=o[7]&&Ae(o),I=o[3]&&Te(o);return{c(){e=f("div"),l=f("h1"),l.textContent=n,d=w(),k&&k.c(),r=w(),s=f("div"),h=f("h2"),h.textContent=_,b=w(),v=f("p"),v.textContent=m,E=w(),g=f("div"),C=f("label"),V=f("input"),q=A(`
        I understand this will delete ALL data permanently`),le=w(),N=f("button"),Q=A(Z),se=w(),R&&R.c(),J=w(),T=f("div"),W=f("h2"),W.textContent=fe,X=w(),U=f("p"),U.textContent=ne,ae=w(),F=f("div"),S=f("label"),j=f("input"),he=A(`
        Dry Run (just preview, don't delete)`),re=w(),P=f("button"),B=A(ee),K=w(),I&&I.c(),this.h()},l(a){e=u(a,"DIV",{class:!0});var x=D(e);l=u(x,"H1",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-1cfdpvk"&&(l.textContent=n),d=L(x),k&&k.l(x),r=L(x),s=u(x,"DIV",{class:!0});var i=D(s);h=u(i,"H2",{class:!0,"data-svelte-h":!0}),M(h)!=="svelte-1k9bq7d"&&(h.textContent=_),b=L(i),v=u(i,"P",{class:!0,"data-svelte-h":!0}),M(v)!=="svelte-1i8obx8"&&(v.textContent=m),E=L(i),g=u(i,"DIV",{class:!0});var O=D(g);C=u(O,"LABEL",{class:!0});var oe=D(C);V=u(oe,"INPUT",{type:!0,class:!0}),q=y(oe,`
        I understand this will delete ALL data permanently`),oe.forEach(p),O.forEach(p),le=L(i),N=u(i,"BUTTON",{class:!0});var de=D(N);Q=y(de,Z),de.forEach(p),se=L(i),R&&R.l(i),i.forEach(p),J=L(x),T=u(x,"DIV",{class:!0});var z=D(T);W=u(z,"H2",{class:!0,"data-svelte-h":!0}),M(W)!=="svelte-k3jfkk"&&(W.textContent=fe),X=L(z),U=u(z,"P",{class:!0,"data-svelte-h":!0}),M(U)!=="svelte-1sc1pkm"&&(U.textContent=ne),ae=L(z),F=u(z,"DIV",{class:!0});var ie=D(F);S=u(ie,"LABEL",{class:!0});var pe=D(S);j=u(pe,"INPUT",{type:!0,class:!0}),he=y(pe,`
        Dry Run (just preview, don't delete)`),pe.forEach(p),ie.forEach(p),re=L(z),P=u(z,"BUTTON",{class:!0});var ce=D(P);B=y(ce,ee),ce.forEach(p),K=L(z),I&&I.l(z),z.forEach(p),x.forEach(p),this.h()},h(){c(l,"class","text-3xl font-bold text-neutral-100 mb-6"),c(h,"class","text-xl font-semibold text-red-400 mb-4"),c(v,"class","text-sm text-neutral-400 mb-4"),c(V,"type","checkbox"),c(V,"class","rounded bg-neutral-950 border-red-700"),c(C,"class","flex items-center gap-2 text-sm text-neutral-300"),c(g,"class","flex items-center gap-3 mb-4"),N.disabled=$=!o[5]||o[6],c(N,"class","px-4 py-2 rounded bg-red-600 hover:bg-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed font-semibold"),c(s,"class","bg-red-950/20 rounded border border-red-800/50 p-6 mb-8"),c(W,"class","text-xl font-semibold text-neutral-200 mb-4"),c(U,"class","text-sm text-neutral-400 mb-4"),c(j,"type","checkbox"),c(j,"class","rounded bg-neutral-950 border-neutral-700"),c(S,"class","flex items-center gap-2 text-sm text-neutral-300"),c(F,"class","flex items-center gap-3 mb-4"),P.disabled=o[4],c(P,"class","px-4 py-2 rounded bg-red-600 hover:bg-red-500 text-white disabled:opacity-50"),c(T,"class","bg-neutral-900 rounded border border-neutral-800 p-6"),c(e,"class","max-w-7xl mx-auto p-6")},m(a,x){te(a,e,x),t(e,l),t(e,d),k&&k.m(e,null),t(e,r),t(e,s),t(s,h),t(s,b),t(s,v),t(s,E),t(s,g),t(g,C),t(C,V),V.checked=o[5],t(C,q),t(s,le),t(s,N),t(N,Q),t(s,se),R&&R.m(s,null),t(e,J),t(e,T),t(T,W),t(T,X),t(T,U),t(T,ae),t(T,F),t(F,S),t(S,j),j.checked=o[2],t(S,he),t(T,re),t(T,P),t(P,B),t(T,K),I&&I.m(T,null),ve||(_e=[xe(V,"change",o[10]),xe(N,"click",o[9]),xe(j,"change",o[11]),xe(P,"click",o[8])],ve=!0)},p(a,[x]){G===(G=Y(a))&&k?k.p(a,x):(k&&k.d(1),k=G&&G(a),k&&(k.c(),k.m(e,r))),x&32&&(V.checked=a[5]),x&64&&Z!==(Z=a[6]?"Resetting...":"🗑️ DELETE ALL DATA")&&H(Q,Z),x&96&&$!==($=!a[5]||a[6])&&(N.disabled=$),a[7]?R?R.p(a,x):(R=Ae(a),R.c(),R.m(s,null)):R&&(R.d(1),R=null),x&4&&(j.checked=a[2]),x&16&&ee!==(ee=a[4]?"Running...":"Run Cleanup")&&H(B,ee),x&16&&(P.disabled=a[4]),a[3]?I?I.p(a,x):(I=Te(a),I.c(),I.m(T,null)):I&&(I.d(1),I=null)},i:Ee,o:Ee,d(a){a&&p(e),k&&k.d(),R&&R.d(),I&&I.d(),ve=!1,qe(_e)}}}function Me(o,e,l){let n=!1,d=null,r=!0,s=null,h=!1,_=!1,b=!1,v=null;async function m(){l(0,n=!0);try{l(1,d=await He())}finally{l(0,n=!1)}}async function E(){l(4,h=!0);try{l(3,s=await Ue(r))}finally{l(4,h=!1)}}async function g(){if(!_){alert("Please check the confirmation box first!");return}if(!confirm(`DANGER: This will permanently delete ALL data in the knowledge graph!

This action cannot be undone.

Type "DELETE ALL" to confirm.`))return;if(prompt('Type "DELETE ALL" to confirm:')!=="DELETE ALL"){alert("Confirmation failed. Reset cancelled.");return}l(6,b=!0);try{l(7,v=await Be()),await m(),l(5,_=!1)}catch(N){alert(`Failed to reset: ${(N==null?void 0:N.message)??"Unknown error"}`)}finally{l(6,b=!1)}}Fe(()=>{m()});function C(){_=this.checked,l(5,_)}function V(){r=this.checked,l(2,r)}return[n,d,r,s,h,_,b,v,E,g,C,V]}class We extends Pe{constructor(e){super(),Se(this,e,Me,ze,je,{})}}export{We as component};
