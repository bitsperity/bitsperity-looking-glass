const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/D7bLzxqH.js","../chunks/CXH2uRM3.js","../chunks/3aJP5oaj.js","../chunks/C2Zuo1AT.js","../chunks/NlG_On0W.js"])))=>i.map(i=>d[i]);
import{_ as be}from"../chunks/C1FmrZbK.js";import{S as Fe,i as $e,s as He,K as ge,L as Ie,d as E,B as ue,r as xe,v as K,w as z,M as Se,y as ee,x as de,a as X,z as De,b as Q,c as a,C as fe,q as ae,m as _,e as T,f as N,o as ve,h as D,D as ce,g as F,j as k,k as y,E as pe,t as $,p as Ue,_ as Be,A as ye}from"../chunks/BeOz57Dq.js";import"../chunks/IHki7fMi.js";import{n as ze}from"../chunks/ClFG0zlK.js";import{L as je}from"../chunks/DliJ_N1j.js";import{R as Ge}from"../chunks/DlXoUwJy.js";import{A as Le,b as We,a as qe}from"../chunks/BXfZ-OPp.js";const Ke=!1,at=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ke},Symbol.toStringTag,{value:"Module"}));function Oe(l){let e,t;return{c(){e=k("div"),t=$(l[6]),this.h()},l(r){e=T(r,"DIV",{class:!0});var d=N(e);t=F(d,l[6]),d.forEach(E),this.h()},h(){_(e,"class","mt-2 text-red-400 text-sm")},m(r,d){Q(r,e,d),a(e,t)},p(r,d){d&64&&X(t,r[6])},d(r){r&&E(e)}}}function Ve(l){let e,t,r,d,n,o=(l[8].properties.name||l[8].properties.ticker||l[8].id)+"",s,b,h,u,L="Close",R,S,M;r=new je({props:{label:l[8].label}});let c=l[8].properties.sector&&we(l);return{c(){e=k("div"),t=k("div"),pe(r.$$.fragment),d=y(),n=k("h3"),s=$(o),b=y(),c&&c.c(),h=y(),u=k("button"),u.textContent=L,this.h()},l(g){e=T(g,"DIV",{class:!0});var m=N(e);t=T(m,"DIV",{class:!0});var P=N(t);ce(r.$$.fragment,P),d=D(P),n=T(P,"H3",{class:!0});var A=N(n);s=F(A,o),A.forEach(E),P.forEach(E),b=D(m),c&&c.l(m),h=D(m),u=T(m,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(u)!=="svelte-khg6by"&&(u.textContent=L),m.forEach(E),this.h()},h(){_(n,"class","text-sm font-medium text-neutral-100"),_(t,"class","flex items-center gap-2 mb-2"),_(u,"class","mt-2 text-xs text-indigo-400 hover:text-indigo-300"),_(e,"class","absolute bottom-4 left-4 bg-neutral-900 rounded border border-neutral-800 p-4 max-w-sm")},m(g,m){Q(g,e,m),a(e,t),fe(r,t,null),a(t,d),a(t,n),a(n,s),a(e,b),c&&c.m(e,null),a(e,h),a(e,u),R=!0,S||(M=ae(u,"click",l[19]),S=!0)},p(g,m){const P={};m&256&&(P.label=g[8].label),r.$set(P),(!R||m&256)&&o!==(o=(g[8].properties.name||g[8].properties.ticker||g[8].id)+"")&&X(s,o),g[8].properties.sector?c?c.p(g,m):(c=we(g),c.c(),c.m(e,h)):c&&(c.d(1),c=null)},i(g){R||(z(r.$$.fragment,g),R=!0)},o(g){K(r.$$.fragment,g),R=!1},d(g){g&&E(e),ue(r),c&&c.d(),S=!1,M()}}}function we(l){let e,t,r=l[8].properties.sector+"",d;return{c(){e=k("div"),t=$("Sector: "),d=$(r),this.h()},l(n){e=T(n,"DIV",{class:!0});var o=N(e);t=F(o,"Sector: "),d=F(o,r),o.forEach(E),this.h()},h(){_(e,"class","text-xs text-neutral-400")},m(n,o){Q(n,e,o),a(e,t),a(e,d)},p(n,o){o&256&&r!==(r=n[8].properties.sector+"")&&X(d,r)},d(n){n&&E(e)}}}function Ne(l){let e,t,r,d,n,o;r=new Ge({props:{relType:l[9].type}});let s=l[9].properties.confidence!=null&&Me(l),b=l[9].properties.valid_from&&Pe(l);return{c(){e=k("div"),t=k("div"),pe(r.$$.fragment),d=y(),s&&s.c(),n=y(),b&&b.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var u=N(e);t=T(u,"DIV",{class:!0});var L=N(t);ce(r.$$.fragment,L),L.forEach(E),d=D(u),s&&s.l(u),n=D(u),b&&b.l(u),u.forEach(E),this.h()},h(){_(t,"class","flex items-center gap-2 mb-2"),_(e,"class","absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-neutral-900 rounded border border-neutral-800 p-3 max-w-xs pointer-events-none")},m(h,u){Q(h,e,u),a(e,t),fe(r,t,null),a(e,d),s&&s.m(e,null),a(e,n),b&&b.m(e,null),o=!0},p(h,u){const L={};u&512&&(L.relType=h[9].type),r.$set(L),h[9].properties.confidence!=null?s?s.p(h,u):(s=Me(h),s.c(),s.m(e,n)):s&&(s.d(1),s=null),h[9].properties.valid_from?b?b.p(h,u):(b=Pe(h),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i(h){o||(z(r.$$.fragment,h),o=!0)},o(h){K(r.$$.fragment,h),o=!1},d(h){h&&E(e),ue(r),s&&s.d(),b&&b.d()}}}function Me(l){let e,t,r=Math.round(l[9].properties.confidence*100)+"",d,n;return{c(){e=k("div"),t=$("Confidence: "),d=$(r),n=$("%"),this.h()},l(o){e=T(o,"DIV",{class:!0});var s=N(e);t=F(s,"Confidence: "),d=F(s,r),n=F(s,"%"),s.forEach(E),this.h()},h(){_(e,"class","text-xs text-neutral-400")},m(o,s){Q(o,e,s),a(e,t),a(e,d),a(e,n)},p(o,s){s&512&&r!==(r=Math.round(o[9].properties.confidence*100)+"")&&X(d,r)},d(o){o&&E(e)}}}function Pe(l){let e,t,r=new Date(l[9].properties.valid_from).toLocaleDateString()+"",d;return{c(){e=k("div"),t=$("From: "),d=$(r),this.h()},l(n){e=T(n,"DIV",{class:!0});var o=N(e);t=F(o,"From: "),d=F(o,r),o.forEach(E),this.h()},h(){_(e,"class","text-xs text-neutral-400")},m(n,o){Q(n,e,o),a(e,t),a(e,d)},p(n,o){o&512&&r!==(r=new Date(n[9].properties.valid_from).toLocaleDateString()+"")&&X(d,r)},d(n){n&&E(e)}}}function Xe(l){let e,t,r,d="Context Graph",n,o,s,b,h,u,L,R,S,M,c,g,m,P,A,Y=l[5]?"Loading...":"Load Context",Z,te,le,O,j,re,G,p='<div class="text-xs font-semibold text-neutral-300 mb-2">Interactions</div> <div class="text-xs text-neutral-400 space-y-1"><div>• Click: Select node</div> <div>• Double-click: Open detail</div> <div>• Hover edge: Show relation info</div></div>',U,i,V,x,J=l[10].length+"",ne,me,oe=l[11].length+"",ie,_e,W,he,Ee;function Re(f){l[13](f)}let Te={fetchSuggestions:We,placeholder:"Topic"};l[0]!==void 0&&(Te.value=l[0]),s=new Le({props:Te}),ge.push(()=>Ie(s,"value",Re)),s.$on("select",l[12]);function Ae(f){l[14](f)}let ke={fetchSuggestions:qe,placeholder:"Tickers (comma-sep)"};l[1]!==void 0&&(ke.value=l[1]),u=new Le({props:ke}),ge.push(()=>Ie(u,"value",Ae)),u.$on("select",l[12]);let w=l[6]&&Oe(l),C=l[8]&&Ve(l),I=l[9]&&Ne(l);return{c(){e=k("div"),t=k("div"),r=k("h1"),r.textContent=d,n=y(),o=k("div"),pe(s.$$.fragment),h=y(),pe(u.$$.fragment),R=y(),S=k("input"),M=y(),c=k("input"),g=y(),m=k("input"),P=y(),A=k("button"),Z=$(Y),te=y(),w&&w.c(),le=y(),O=k("div"),j=k("div"),re=y(),G=k("div"),G.innerHTML=p,U=y(),C&&C.c(),i=y(),I&&I.c(),V=y(),x=k("div"),ne=$(J),me=$(" nodes | "),ie=$(oe),_e=$(" edges"),this.h()},l(f){e=T(f,"DIV",{class:!0});var v=N(e);t=T(v,"DIV",{class:!0});var B=N(t);r=T(B,"H1",{class:!0,"data-svelte-h":!0}),ve(r)!=="svelte-xp9abm"&&(r.textContent=d),n=D(B),o=T(B,"DIV",{class:!0});var H=N(o);ce(s.$$.fragment,H),h=D(H),ce(u.$$.fragment,H),R=D(H),S=T(H,"INPUT",{type:!0,placeholder:!0,class:!0}),M=D(H),c=T(H,"INPUT",{type:!0,min:!0,max:!0,placeholder:!0,class:!0}),g=D(H),m=T(H,"INPUT",{type:!0,min:!0,max:!0,placeholder:!0,class:!0}),H.forEach(E),P=D(B),A=T(B,"BUTTON",{class:!0});var Ce=N(A);Z=F(Ce,Y),Ce.forEach(E),te=D(B),w&&w.l(B),B.forEach(E),le=D(v),O=T(v,"DIV",{class:!0});var q=N(O);j=T(q,"DIV",{class:!0}),N(j).forEach(E),re=D(q),G=T(q,"DIV",{class:!0,"data-svelte-h":!0}),ve(G)!=="svelte-1af8b3t"&&(G.innerHTML=p),U=D(q),C&&C.l(q),i=D(q),I&&I.l(q),q.forEach(E),V=D(v),x=T(v,"DIV",{class:!0});var se=N(x);ne=F(se,J),me=F(se," nodes | "),ie=F(se,oe),_e=F(se," edges"),se.forEach(E),v.forEach(E),this.h()},h(){_(r,"class","text-2xl font-bold mb-3"),_(S,"type","datetime-local"),_(S,"placeholder","As of (ISO)"),_(S,"class","px-3 py-1 bg-neutral-900 border border-neutral-700 rounded text-sm text-neutral-100"),_(c,"type","number"),_(c,"min","1"),_(c,"max","3"),_(c,"placeholder","Depth"),_(c,"class","px-3 py-1 bg-neutral-900 border border-neutral-700 rounded text-sm text-neutral-100"),_(m,"type","number"),_(m,"min","10"),_(m,"max","500"),_(m,"placeholder","Limit"),_(m,"class","px-3 py-1 bg-neutral-900 border border-neutral-700 rounded text-sm text-neutral-100"),_(o,"class","grid grid-cols-1 md:grid-cols-5 gap-2 mb-3"),A.disabled=l[5],_(A,"class","px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm disabled:opacity-50"),_(t,"class","p-4 border-b border-neutral-800"),_(j,"class","absolute inset-0"),_(G,"class","absolute top-4 right-4 bg-neutral-900/90 rounded border border-neutral-800 p-3 max-w-xs"),_(O,"class","flex-1 relative"),_(x,"class","p-2 border-t border-neutral-800 text-xs text-neutral-500 text-center"),_(e,"class","flex flex-col h-screen bg-neutral-950 text-neutral-100")},m(f,v){Q(f,e,v),a(e,t),a(t,r),a(t,n),a(t,o),fe(s,o,null),a(o,h),fe(u,o,null),a(o,R),a(o,S),ee(S,l[2]),a(o,M),a(o,c),ee(c,l[3]),a(o,g),a(o,m),ee(m,l[4]),a(t,P),a(t,A),a(A,Z),a(t,te),w&&w.m(t,null),a(e,le),a(e,O),a(O,j),l[18](j),a(O,re),a(O,G),a(O,U),C&&C.m(O,null),a(O,i),I&&I.m(O,null),a(e,V),a(e,x),a(x,ne),a(x,me),a(x,ie),a(x,_e),W=!0,he||(Ee=[ae(S,"input",l[15]),ae(c,"input",l[16]),ae(m,"input",l[17]),ae(A,"click",l[12])],he=!0)},p(f,[v]){const B={};!b&&v&1&&(b=!0,B.value=f[0],Se(()=>b=!1)),s.$set(B);const H={};!L&&v&2&&(L=!0,H.value=f[1],Se(()=>L=!1)),u.$set(H),v&4&&ee(S,f[2]),v&8&&de(c.value)!==f[3]&&ee(c,f[3]),v&16&&de(m.value)!==f[4]&&ee(m,f[4]),(!W||v&32)&&Y!==(Y=f[5]?"Loading...":"Load Context")&&X(Z,Y),(!W||v&32)&&(A.disabled=f[5]),f[6]?w?w.p(f,v):(w=Oe(f),w.c(),w.m(t,null)):w&&(w.d(1),w=null),f[8]?C?(C.p(f,v),v&256&&z(C,1)):(C=Ve(f),C.c(),z(C,1),C.m(O,i)):C&&(ye(),K(C,1,1,()=>{C=null}),De()),f[9]?I?(I.p(f,v),v&512&&z(I,1)):(I=Ne(f),I.c(),z(I,1),I.m(O,null)):I&&(ye(),K(I,1,1,()=>{I=null}),De()),(!W||v&1024)&&J!==(J=f[10].length+"")&&X(ne,J),(!W||v&2048)&&oe!==(oe=f[11].length+"")&&X(ie,oe)},i(f){W||(z(s.$$.fragment,f),z(u.$$.fragment,f),z(C),z(I),W=!0)},o(f){K(s.$$.fragment,f),K(u.$$.fragment,f),K(C),K(I),W=!1},d(f){f&&E(e),ue(s),ue(u),w&&w.d(),l[18](null),C&&C.d(),I&&I.d(),he=!1,xe(Ee)}}}function Ye(l){return{Company:"#3b82f6",Instrument:"#06b6d4",Event:"#ef4444",Concept:"#a855f7",Location:"#10b981",Observation:"#f59e0b",PriceEvent:"#f97316",Pattern:"#ec4899",Hypothesis:"#6366f1",Regime:"#14b8a6",News:"#6b7280"}[l]||"#9ca3af"}function Je(l){return{SUPPLIES_TO:"#3b82f6",COMPETES_WITH:"#ef4444",AFFECTS:"#f97316",CORRELATES_WITH:"#a855f7",CORRELATED_WITH:"#a855f7",MENTIONS:"#6b7280",EVIDENCE_FOR:"#10b981",CONTRADICTS:"#7f1d1d",VALIDATES:"#14b8a6",EXTRACTED_FROM:"#ec4899",HAS_PRICE_EVENT:"#f59e0b",PRICE_EVENT_OF:"#f59e0b",SAME_COMMUNITY:"#06b6d4",BENEFITS_FROM:"#6366f1"}[l]||"#9ca3af"}function Qe(l,e,t){let r,d,n,o="",s="",b="",h=2,u=100,L=!1,R=null,S,M=null,c=null,g=null,m=[],P=[];async function A(){t(5,L=!0),t(6,R=null);try{const p=s?s.split(",").map(i=>i.trim()).filter(i=>i):[],U=await ze({topic:o||void 0,tickers:p.length>0?p:void 0,as_of:b||void 0,depth:h,limit:u});t(10,m=U.subgraph.nodes),t(11,P=U.subgraph.edges),await Be(),setTimeout(()=>Y(),50)}catch(p){t(6,R=(p==null?void 0:p.message)??"Failed to load context")}finally{t(5,L=!1)}}async function Y(){if(!r||!d||!S||m.length===0)return;M&&(M.kill(),M=null);const p=new d;for(const i of m)p.addNode(i.id,{x:Math.random()*100,y:Math.random()*100,size:10+(i.properties.ticker?5:0),label:i.properties.name||i.properties.ticker||i.id,color:Ye(i.label),type:"circle",labelColor:"#e5e5e5",nodeLabel:i.label,nodeSector:i.properties.sector||""});const U=new Set;for(const i of P){const V=`${i.source_id}-${i.target_id}`;p.hasNode(i.source_id)&&p.hasNode(i.target_id)&&!U.has(V)&&(p.addEdge(i.source_id,i.target_id,{label:i.rel_type,color:Je(i.rel_type),size:(i.properties.confidence||.5)*3,edgeLabelColor:"#c9c9c9",edgeProperties:i.properties}),U.add(V))}if(n){const i=n.inferSettings(p);n.assign(p,{iterations:300,settings:i})}M=new r(p,S,{labelRenderedSizeThreshold:5,labelColor:{color:"#e5e5e5"},edgeLabelColor:{attribute:"edgeLabelColor"},renderEdgeLabels:!0}),M.on("clickNode",({node:i})=>{t(8,c=m.find(V=>V.id===i))}),M.on("doubleClickNode",({node:i})=>{var V,x;window.open(`/ariadne/search?tickers=${((x=(V=m.find(J=>J.id===i))==null?void 0:V.properties)==null?void 0:x.ticker)||""}`,"_blank")}),M.on("enterEdge",({edge:i})=>{const V=p.getEdgeAttributes(i);t(9,g={from:p.source(i),to:p.target(i),type:V.label,properties:V.edgeProperties||{}})}),M.on("leaveEdge",()=>{t(9,g=null)})}Ue(async()=>{try{const[p,U,i]=await Promise.all([be(()=>import("../chunks/D7bLzxqH.js"),__vite__mapDeps([0,1,2]),import.meta.url),be(()=>import("../chunks/C2Zuo1AT.js"),__vite__mapDeps([3,1]),import.meta.url),be(()=>import("../chunks/NlG_On0W.js").then(V=>V.i),__vite__mapDeps([4,2]),import.meta.url)]);r=p.default,d=U.default,n=i.default}catch(p){t(6,R=`Failed to load Sigma.js: ${p==null?void 0:p.message}`)}});function Z(p){o=p,t(0,o)}function te(p){s=p,t(1,s)}function le(){b=this.value,t(2,b)}function O(){h=de(this.value),t(3,h)}function j(){u=de(this.value),t(4,u)}function re(p){ge[p?"unshift":"push"](()=>{S=p,t(7,S)})}return[o,s,b,h,u,L,R,S,c,g,m,P,A,Z,te,le,O,j,re,()=>t(8,c=null)]}class nt extends Fe{constructor(e){super(),$e(this,e,Qe,Xe,He,{})}}export{nt as component,at as universal};
