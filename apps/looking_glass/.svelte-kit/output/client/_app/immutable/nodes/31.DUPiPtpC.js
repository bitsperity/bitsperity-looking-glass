import{S as ct,i as it,s as ut,d as m,B as Be,u as Ie,r as ht,v as Ee,w as be,y as Re,z as rt,b as L,c as o,C as Fe,q as X,m as v,e as b,f as x,o as ne,h as D,D as Ue,g as V,j as k,k as y,E as Ae,t as S,p as ft,a as G,n as ye,A as ot}from"../chunks/DnBpi1Qd.js";import{e as Y}from"../chunks/B5jFdsvg.js";import"../chunks/IHki7fMi.js";import{r as dt,b as _t}from"../chunks/BOOhIyw7.js";import{C as vt}from"../chunks/BnvI_Nfc.js";import{T as pt}from"../chunks/B3c7iK5f.js";import{M as gt}from"../chunks/BNha2vma.js";import{T as mt}from"../chunks/DPWOJN0Q.js";function ze(l,e,n){const a=l.slice();return a[32]=e[n],a}function Le(l,e,n){const a=l.slice();return a[35]=e[n],a}function He(l,e,n){const a=l.slice();return a[38]=e[n][0],a[39]=e[n][1],a}function Qe(l,e,n){const a=l.slice();return a[42]=e[n],a}function Ge(l,e,n){const a=l.slice();return a[38]=e[n][0],a[39]=e[n][1],a}function Je(l,e,n){const a=l.slice();return a[42]=e[n],a}function Ke(l,e,n){const a=l.slice();return a[49]=e[n],a[51]=n,a}function We(l){let e,n,a,f="Clear all",d,h,i=Y(l[4]),r=[];for(let t=0;t<i.length;t+=1)r[t]=Xe(Ke(l,i,t));return{c(){e=k("div");for(let t=0;t<r.length;t+=1)r[t].c();n=y(),a=k("button"),a.textContent=f,this.h()},l(t){e=b(t,"DIV",{class:!0});var u=x(e);for(let s=0;s<r.length;s+=1)r[s].l(u);n=D(u),a=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-17q25ij"&&(a.textContent=f),u.forEach(m),this.h()},h(){v(a,"class","px-2 py-1 bg-neutral-900 rounded hover:bg-neutral-800"),v(e,"class","flex flex-wrap gap-2 text-xs")},m(t,u){L(t,e,u);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);o(e,n),o(e,a),d||(h=X(a,"click",l[20]),d=!0)},p(t,u){if(u[0]&8208){i=Y(t[4]);let s;for(s=0;s<i.length;s+=1){const c=Ke(t,i,s);r[s]?r[s].p(c,u):(r[s]=Xe(c),r[s].c(),r[s].m(e,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}},d(t){t&&m(e),Ie(r,t),d=!1,h()}}}function Xe(l){let e,n=l[49].key+"",a,f,d=l[49].value+"",h,i,r,t="×",u,s;function c(){return l[19](l[51])}return{c(){e=k("span"),a=S(n),f=S(":"),h=S(d),i=y(),r=k("button"),r.textContent=t,this.h()},l(_){e=b(_,"SPAN",{class:!0});var p=x(e);a=V(p,n),f=V(p,":"),h=V(p,d),i=D(p),r=b(p,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-1rwucbr"&&(r.textContent=t),p.forEach(m),this.h()},h(){v(r,"class","ml-1 text-neutral-400 hover:text-neutral-200"),v(e,"class","px-2 py-1 bg-neutral-800 rounded")},m(_,p){L(_,e,p),o(e,a),o(e,f),o(e,h),o(e,i),o(e,r),u||(s=X(r,"click",c),u=!0)},p(_,p){l=_,p[0]&16&&n!==(n=l[49].key+"")&&G(a,n),p[0]&16&&d!==(d=l[49].value+"")&&G(h,d)},d(_){_&&m(e),u=!1,s()}}}function Ye(l){let e,n=l[42].value+"",a,f,d=l[42].count+"",h,i,r,t;function u(){return l[21](l[38],l[42])}return{c(){e=k("button"),a=S(n),f=S(" ("),h=S(d),i=S(")"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var c=x(e);a=V(c,n),f=V(c," ("),h=V(c,d),i=V(c,")"),c.forEach(m),this.h()},h(){v(e,"class","px-2 py-1 bg-neutral-900 hover:bg-neutral-800 rounded text-xs")},m(s,c){L(s,e,c),o(e,a),o(e,f),o(e,h),o(e,i),r||(t=X(e,"click",u),r=!0)},p(s,c){l=s,c[0]&4&&n!==(n=l[42].value+"")&&G(a,n),c[0]&4&&d!==(d=l[42].count+"")&&G(h,d)},d(s){s&&m(e),r=!1,t()}}}function Ze(l){let e,n,a=l[38]+"",f,d,h,i=Y(l[39]),r=[];for(let t=0;t<i.length;t+=1)r[t]=Ye(Je(l,i,t));return{c(){e=k("div"),n=k("div"),f=S(a),d=y(),h=k("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){e=b(t,"DIV",{});var u=x(e);n=b(u,"DIV",{class:!0});var s=x(n);f=V(s,a),s.forEach(m),d=D(u),h=b(u,"DIV",{class:!0});var c=x(h);for(let _=0;_<r.length;_+=1)r[_].l(c);c.forEach(m),u.forEach(m),this.h()},h(){v(n,"class","text-xs text-neutral-500 uppercase mb-1"),v(h,"class","flex flex-wrap gap-1")},m(t,u){L(t,e,u),o(e,n),o(n,f),o(e,d),o(e,h);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(h,null)},p(t,u){if(u[0]&4&&a!==(a=t[38]+"")&&G(f,a),u[0]&4100){i=Y(t[39]);let s;for(s=0;s<i.length;s+=1){const c=Je(t,i,s);r[s]?r[s].p(c,u):(r[s]=Ye(c),r[s].c(),r[s].m(h,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}},d(t){t&&m(e),Ie(r,t)}}}function et(l){let e,n,a="Suggestions",f,d=Y(Object.entries(l[3])),h=[];for(let i=0;i<d.length;i+=1)h[i]=lt(He(l,d,i));return{c(){e=k("div"),n=k("div"),n.textContent=a,f=y();for(let i=0;i<h.length;i+=1)h[i].c();this.h()},l(i){e=b(i,"DIV",{});var r=x(e);n=b(r,"DIV",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-11fzwsr"&&(n.textContent=a),f=D(r);for(let t=0;t<h.length;t+=1)h[t].l(r);r.forEach(m),this.h()},h(){v(n,"class","text-xs text-neutral-500 uppercase mb-1")},m(i,r){L(i,e,r),o(e,n),o(e,f);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null)},p(i,r){if(r[0]&4104){d=Y(Object.entries(i[3]));let t;for(t=0;t<d.length;t+=1){const u=He(i,d,t);h[t]?h[t].p(u,r):(h[t]=lt(u),h[t].c(),h[t].m(e,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=d.length}},d(i){i&&m(e),Ie(h,i)}}}function tt(l){let e,n=l[42].value+"",a,f,d=l[42].count+"",h,i,r,t;function u(){return l[22](l[38],l[42])}return{c(){e=k("button"),a=S(n),f=S(" ("),h=S(d),i=S(")"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var c=x(e);a=V(c,n),f=V(c," ("),h=V(c,d),i=V(c,")"),c.forEach(m),this.h()},h(){v(e,"class","px-2 py-1 bg-neutral-900 hover:bg-neutral-800 rounded text-xs")},m(s,c){L(s,e,c),o(e,a),o(e,f),o(e,h),o(e,i),r||(t=X(e,"click",u),r=!0)},p(s,c){l=s,c[0]&8&&n!==(n=l[42].value+"")&&G(a,n),c[0]&8&&d!==(d=l[42].count+"")&&G(h,d)},d(s){s&&m(e),r=!1,t()}}}function lt(l){let e,n,a=l[38]+"",f,d,h,i,r=Y((l[39]||[]).slice(0,6)),t=[];for(let u=0;u<r.length;u+=1)t[u]=tt(Qe(l,r,u));return{c(){e=k("div"),n=k("div"),f=S(a),d=y(),h=k("div");for(let u=0;u<t.length;u+=1)t[u].c();i=y(),this.h()},l(u){e=b(u,"DIV",{class:!0});var s=x(e);n=b(s,"DIV",{class:!0});var c=x(n);f=V(c,a),c.forEach(m),d=D(s),h=b(s,"DIV",{class:!0});var _=x(h);for(let p=0;p<t.length;p+=1)t[p].l(_);_.forEach(m),i=D(s),s.forEach(m),this.h()},h(){v(n,"class","text-[11px] text-neutral-500"),v(h,"class","flex flex-wrap gap-1"),v(e,"class","mb-1")},m(u,s){L(u,e,s),o(e,n),o(n,f),o(e,d),o(e,h);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(h,null);o(e,i)},p(u,s){if(s[0]&8&&a!==(a=u[38]+"")&&G(f,a),s[0]&4104){r=Y((u[39]||[]).slice(0,6));let c;for(c=0;c<r.length;c+=1){const _=Qe(u,r,c);t[c]?t[c].p(_,s):(t[c]=tt(_),t[c].c(),t[c].m(h,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=r.length}},d(u){u&&m(e),Ie(t,u)}}}function nt(l){let e,n,a;return{c(){e=k("div"),this.h()},l(f){e=b(f,"DIV",{class:!0,style:!0,title:!0}),x(e).forEach(m),this.h()},h(){v(e,"class","w-2 bg-neutral-700"),v(e,"style",n=`height:${Math.max(2,Math.min(60,l[35].count*4))}px`),v(e,"title",a=`${l[35].date}: ${l[35].count}`)},m(f,d){L(f,e,d)},p(f,d){d[0]&64&&n!==(n=`height:${Math.max(2,Math.min(60,f[35].count*4))}px`)&&v(e,"style",n),d[0]&64&&a!==(a=`${f[35].date}: ${f[35].count}`)&&v(e,"title",a)},d(f){f&&m(e)}}}function bt(l){let e,n=l[1].length+"",a,f,d,h,i,r=Y(l[1]),t=[];for(let s=0;s<r.length;s+=1)t[s]=at(ze(l,r,s));const u=s=>Ee(t[s],1,1,()=>{t[s]=null});return{c(){e=k("div"),a=S(n),f=S(" results"),d=y(),h=k("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var c=x(e);a=V(c,n),f=V(c," results"),c.forEach(m),d=D(s),h=b(s,"DIV",{class:!0});var _=x(h);for(let p=0;p<t.length;p+=1)t[p].l(_);_.forEach(m),this.h()},h(){v(e,"class","text-sm text-neutral-400 mb-2"),v(h,"class","space-y-2")},m(s,c){L(s,e,c),o(e,a),o(e,f),L(s,d,c),L(s,h,c);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(h,null);i=!0},p(s,c){if((!i||c[0]&2)&&n!==(n=s[1].length+"")&&G(a,n),c[0]&65698){r=Y(s[1]);let _;for(_=0;_<r.length;_+=1){const p=ze(s,r,_);t[_]?(t[_].p(p,c),be(t[_],1)):(t[_]=at(p),t[_].c(),be(t[_],1),t[_].m(h,null))}for(ot(),_=r.length;_<t.length;_+=1)u(_);rt()}},i(s){if(!i){for(let c=0;c<r.length;c+=1)be(t[c]);i=!0}},o(s){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)Ee(t[c]);i=!1},d(s){s&&(m(e),m(d),m(h)),Ie(t,s)}}}function kt(l){let e,n;return{c(){e=k("div"),n=S(l[9]),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=x(e);n=V(f,l[9]),f.forEach(m),this.h()},h(){v(e,"class","text-red-400")},m(a,f){L(a,e,f),o(e,n)},p(a,f){f[0]&512&&G(n,a[9])},i:ye,o:ye,d(a){a&&m(e)}}}function Ct(l){let e,n="Searching…";return{c(){e=k("div"),e.textContent=n,this.h()},l(a){e=b(a,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-fk5c55"&&(e.textContent=n),this.h()},h(){v(e,"class","text-neutral-400")},m(a,f){L(a,e,f)},p:ye,i:ye,o:ye,d(a){a&&m(e)}}}function st(l){let e,n,a=l[32].score_components.base_sim.toFixed(2)+"",f,d,h=l[32].score_components.recency.toFixed(2)+"",i,r,t=l[32].score_components.type.toFixed(2)+"",u,s,c=l[32].score_components.ticker.toFixed(2)+"",_;return{c(){e=k("span"),n=S("base "),f=S(a),d=S(" · rec "),i=S(h),r=S(" · type "),u=S(t),s=S(" · tic "),_=S(c),this.h()},l(p){e=b(p,"SPAN",{class:!0});var I=x(e);n=V(I,"base "),f=V(I,a),d=V(I," · rec "),i=V(I,h),r=V(I," · type "),u=V(I,t),s=V(I," · tic "),_=V(I,c),I.forEach(m),this.h()},h(){v(e,"class","text-neutral-600")},m(p,I){L(p,e,I),o(e,n),o(e,f),o(e,d),o(e,i),o(e,r),o(e,u),o(e,s),o(e,_)},p(p,I){I[0]&2&&a!==(a=p[32].score_components.base_sim.toFixed(2)+"")&&G(f,a),I[0]&2&&h!==(h=p[32].score_components.recency.toFixed(2)+"")&&G(i,h),I[0]&2&&t!==(t=p[32].score_components.type.toFixed(2)+"")&&G(u,t),I[0]&2&&c!==(c=p[32].score_components.ticker.toFixed(2)+"")&&G(_,c)},d(p){p&&m(e)}}}function at(l){let e,n,a,f,d,h,i,r,t,u,s,c,_=l[32].score.toFixed(3)+"",p,I,H,$,J,K,ae,se,F,ee,fe,de,P,_e,Q,B,U,re,ke;function xe(...C){return l[27](l[32],...C)}i=new pt({props:{thought:l[32].thought,showActions:!0,onPreview:l[28]}});let j=l[32].score_components&&st(l);return{c(){e=k("div"),n=k("div"),a=k("input"),d=y(),h=k("div"),Ae(i.$$.fragment),r=y(),t=k("div"),u=k("div"),s=k("span"),c=S("Score: "),p=S(_),I=y(),j&&j.c(),H=y(),$=k("div"),J=k("a"),K=S("Open"),se=y(),F=k("a"),ee=S("Relations"),de=y(),P=k("a"),_e=S("Similar"),B=y(),this.h()},l(C){e=b(C,"DIV",{class:!0});var E=x(e);n=b(E,"DIV",{class:!0});var w=x(n);a=b(w,"INPUT",{type:!0}),d=D(w),h=b(w,"DIV",{class:!0});var ue=x(h);Ue(i.$$.fragment,ue),ue.forEach(m),w.forEach(m),r=D(E),t=b(E,"DIV",{class:!0});var oe=x(t);u=b(oe,"DIV",{class:!0});var W=x(u);s=b(W,"SPAN",{});var ve=x(s);c=V(ve,"Score: "),p=V(ve,_),ve.forEach(m),I=D(W),j&&j.l(W),W.forEach(m),H=D(oe),$=b(oe,"DIV",{class:!0});var Z=x($);J=b(Z,"A",{class:!0,href:!0});var N=x(J);K=V(N,"Open"),N.forEach(m),se=D(Z),F=b(Z,"A",{class:!0,href:!0});var he=x(F);ee=V(he,"Relations"),he.forEach(m),de=D(Z),P=b(Z,"A",{class:!0,href:!0});var Te=x(P);_e=V(Te,"Similar"),Te.forEach(m),Z.forEach(m),oe.forEach(m),B=D(E),E.forEach(m),this.h()},h(){v(a,"type","checkbox"),a.checked=f=!!l[5][l[32].id],v(h,"class","flex-1"),v(n,"class","flex items-start gap-3"),v(u,"class","text-neutral-500 flex items-center gap-3"),v(J,"class","px-2 py-1 rounded bg-neutral-800 hover:bg-neutral-700"),v(J,"href",ae=`/manifold/thoughts/${l[32].id}`),v(F,"class","px-2 py-1 rounded bg-neutral-800 hover:bg-neutral-700"),v(F,"href",fe=`/manifold/relations/${l[32].id}`),v(P,"class","px-2 py-1 rounded bg-neutral-800 hover:bg-neutral-700"),v(P,"href",Q=`/manifold/thoughts/${l[32].id}`),v($,"class","flex gap-2"),v(t,"class","mt-2 flex items-center justify-between text-xs"),v(e,"class","bg-neutral-900 rounded p-4 border border-neutral-800")},m(C,E){L(C,e,E),o(e,n),o(n,a),o(n,d),o(n,h),Fe(i,h,null),o(e,r),o(e,t),o(t,u),o(u,s),o(s,c),o(s,p),o(u,I),j&&j.m(u,null),o(t,H),o(t,$),o($,J),o(J,K),o($,se),o($,F),o(F,ee),o($,de),o($,P),o(P,_e),o(e,B),U=!0,re||(ke=X(a,"change",xe),re=!0)},p(C,E){l=C,(!U||E[0]&34&&f!==(f=!!l[5][l[32].id]))&&(a.checked=f);const w={};E[0]&2&&(w.thought=l[32].thought),E[0]&128&&(w.onPreview=l[28]),i.$set(w),(!U||E[0]&2)&&_!==(_=l[32].score.toFixed(3)+"")&&G(p,_),l[32].score_components?j?j.p(l,E):(j=st(l),j.c(),j.m(u,null)):j&&(j.d(1),j=null),(!U||E[0]&2&&ae!==(ae=`/manifold/thoughts/${l[32].id}`))&&v(J,"href",ae),(!U||E[0]&2&&fe!==(fe=`/manifold/relations/${l[32].id}`))&&v(F,"href",fe),(!U||E[0]&2&&Q!==(Q=`/manifold/thoughts/${l[32].id}`))&&v(P,"href",Q)},i(C){U||(be(i.$$.fragment,C),U=!0)},o(C){Ee(i.$$.fragment,C),U=!1},d(C){C&&m(e),Be(i),j&&j.d(),re=!1,ke()}}}function Et(l){let e,n,a="Manifold · Search",f,d,h,i,r,t,u,s="Search",c,_,p,I,H,$="Facets",J,K,ae=Object.keys(l[3]).length>0,se,F,ee,fe="Timeline (last 14d)",de,P,_e,Q,B,U,re,ke,xe,j,C="Quarantine",E,w,ue="Unquarantine",oe,W,ve="Re-embed",Z,N,he="Mark Promoted",Te,te,le,Oe,pe,Ve,je,Pe;d=new gt({});let R=l[4].length>0&&We(l),we=Y(Object.entries(l[2])),M=[];for(let g=0;g<we.length;g+=1)M[g]=Ze(Ge(l,we,g));let z=ae&&et(l),De=Y(l[6]),q=[];for(let g=0;g<De.length;g+=1)q[g]=nt(Le(l,De,g));const Me=[Ct,kt,bt],ge=[];function qe(g,O){return g[8]?0:g[9]?1:2}return te=qe(l),le=ge[te]=Me[te](l),pe=new mt({props:{thoughtId:l[7],onClose:l[29]}}),{c(){e=k("div"),n=k("h1"),n.textContent=a,f=y(),Ae(d.$$.fragment),h=y(),i=k("div"),r=k("input"),t=y(),u=k("button"),u.textContent=s,c=y(),R&&R.c(),_=y(),p=k("div"),I=k("aside"),H=k("div"),H.textContent=$,J=y();for(let g=0;g<M.length;g+=1)M[g].c();K=y(),z&&z.c(),se=y(),F=k("div"),ee=k("div"),ee.textContent=fe,de=y(),P=k("div");for(let g=0;g<q.length;g+=1)q[g].c();_e=y(),Q=k("section"),B=k("div"),U=k("label"),re=k("input"),ke=S(" Select all"),xe=y(),j=k("button"),j.textContent=C,E=y(),w=k("button"),w.textContent=ue,oe=y(),W=k("button"),W.textContent=ve,Z=y(),N=k("button"),N.textContent=he,Te=y(),le.c(),Oe=y(),Ae(pe.$$.fragment),this.h()},l(g){e=b(g,"DIV",{class:!0});var O=x(e);n=b(O,"H1",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-1h5zxaj"&&(n.textContent=a),f=D(O),Ue(d.$$.fragment,O),h=D(O),i=b(O,"DIV",{class:!0});var A=x(i);r=b(A,"INPUT",{class:!0,placeholder:!0}),t=D(A),u=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(u)!=="svelte-1jymclq"&&(u.textContent=s),A.forEach(m),c=D(O),R&&R.l(O),_=D(O),p=b(O,"DIV",{class:!0});var me=x(p);I=b(me,"ASIDE",{class:!0});var T=x(I);H=b(T,"DIV",{class:!0,"data-svelte-h":!0}),ne(H)!=="svelte-xf9gnl"&&(H.textContent=$),J=D(T);for(let Ce=0;Ce<M.length;Ce+=1)M[Ce].l(T);K=D(T),z&&z.l(T),se=D(T),F=b(T,"DIV",{});var ce=x(F);ee=b(ce,"DIV",{class:!0,"data-svelte-h":!0}),ne(ee)!=="svelte-62kje9"&&(ee.textContent=fe),de=D(ce),P=b(ce,"DIV",{class:!0});var $e=x(P);for(let Ce=0;Ce<q.length;Ce+=1)q[Ce].l($e);$e.forEach(m),ce.forEach(m),T.forEach(m),_e=D(me),Q=b(me,"SECTION",{class:!0});var Se=x(Q);B=b(Se,"DIV",{class:!0});var ie=x(B);U=b(ie,"LABEL",{class:!0});var Ne=x(U);re=b(Ne,"INPUT",{type:!0}),ke=V(Ne," Select all"),Ne.forEach(m),xe=D(ie),j=b(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(j)!=="svelte-11hnsat"&&(j.textContent=C),E=D(ie),w=b(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(w)!=="svelte-e0di29"&&(w.textContent=ue),oe=D(ie),W=b(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(W)!=="svelte-xjtx3w"&&(W.textContent=ve),Z=D(ie),N=b(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(N)!=="svelte-13w3rsu"&&(N.textContent=he),ie.forEach(m),Te=D(Se),le.l(Se),Se.forEach(m),me.forEach(m),Oe=D(O),Ue(pe.$$.fragment,O),O.forEach(m),this.h()},h(){v(n,"class","text-2xl font-semibold"),v(r,"class","px-3 py-2 rounded bg-neutral-800 w-full"),v(r,"placeholder","Search thoughts… (type to search, Enter to force)"),v(u,"class","px-3 py-2 rounded bg-indigo-600 hover:bg-indigo-500"),v(i,"class","flex gap-2"),v(H,"class","text-sm text-neutral-400"),v(ee,"class","text-xs text-neutral-500 uppercase mb-1"),v(P,"class","flex items-end gap-1 h-16"),v(I,"class","md:col-span-1 space-y-3"),v(re,"type","checkbox"),v(U,"class","flex items-center gap-1"),v(j,"class","px-2 py-1 bg-neutral-900 hover:bg-neutral-800 rounded"),v(w,"class","px-2 py-1 bg-neutral-900 hover:bg-neutral-800 rounded"),v(W,"class","px-2 py-1 bg-neutral-900 hover:bg-neutral-800 rounded"),v(N,"class","px-2 py-1 bg-neutral-900 hover:bg-neutral-800 rounded"),v(B,"class","mb-2 flex items-center gap-2 text-xs"),v(Q,"class","md:col-span-3"),v(p,"class","grid grid-cols-1 md:grid-cols-4 gap-4"),v(e,"class","p-6 space-y-4 h-full overflow-auto")},m(g,O){L(g,e,O),o(e,n),o(e,f),Fe(d,e,null),o(e,h),o(e,i),o(i,r),Re(r,l[0]),o(i,t),o(i,u),o(e,c),R&&R.m(e,null),o(e,_),o(e,p),o(p,I),o(I,H),o(I,J);for(let A=0;A<M.length;A+=1)M[A]&&M[A].m(I,null);o(I,K),z&&z.m(I,null),o(I,se),o(I,F),o(F,ee),o(F,de),o(F,P);for(let A=0;A<q.length;A+=1)q[A]&&q[A].m(P,null);o(p,_e),o(p,Q),o(Q,B),o(B,U),o(U,re),o(U,ke),o(B,xe),o(B,j),o(B,E),o(B,w),o(B,oe),o(B,W),o(B,Z),o(B,N),o(Q,Te),ge[te].m(Q,null),o(e,Oe),Fe(pe,e,null),Ve=!0,je||(Pe=[X(r,"input",l[17]),X(r,"input",l[11]),X(r,"keydown",l[18]),X(u,"click",l[10]),X(re,"change",l[15]),X(j,"click",l[23]),X(w,"click",l[24]),X(W,"click",l[25]),X(N,"click",l[26])],je=!0)},p(g,O){if(O[0]&1&&r.value!==g[0]&&Re(r,g[0]),g[4].length>0?R?R.p(g,O):(R=We(g),R.c(),R.m(e,_)):R&&(R.d(1),R=null),O[0]&4100){we=Y(Object.entries(g[2]));let T;for(T=0;T<we.length;T+=1){const ce=Ge(g,we,T);M[T]?M[T].p(ce,O):(M[T]=Ze(ce),M[T].c(),M[T].m(I,K))}for(;T<M.length;T+=1)M[T].d(1);M.length=we.length}if(O[0]&8&&(ae=Object.keys(g[3]).length>0),ae?z?z.p(g,O):(z=et(g),z.c(),z.m(I,se)):z&&(z.d(1),z=null),O[0]&64){De=Y(g[6]);let T;for(T=0;T<De.length;T+=1){const ce=Le(g,De,T);q[T]?q[T].p(ce,O):(q[T]=nt(ce),q[T].c(),q[T].m(P,null))}for(;T<q.length;T+=1)q[T].d(1);q.length=De.length}let A=te;te=qe(g),te===A?ge[te].p(g,O):(ot(),Ee(ge[A],1,1,()=>{ge[A]=null}),rt(),le=ge[te],le?le.p(g,O):(le=ge[te]=Me[te](g),le.c()),be(le,1),le.m(Q,null));const me={};O[0]&128&&(me.thoughtId=g[7]),O[0]&128&&(me.onClose=g[29]),pe.$set(me)},i(g){Ve||(be(d.$$.fragment,g),be(le),be(pe.$$.fragment,g),Ve=!0)},o(g){Ee(d.$$.fragment,g),Ee(le),Ee(pe.$$.fragment,g),Ve=!1},d(g){g&&m(e),Be(d),R&&R.d(),Ie(M,g),z&&z.d(),Ie(q,g),ge[te].d(),Be(pe),je=!1,ht(Pe)}}}function It(l,e,n){let a="",f=[],d={},h={},i=[],r={},t=[],u=null,s=!1,c=null,_=null;async function p(){var C;n(8,s=!0),n(9,c=null),n(1,f=[]);try{const E={must:i.map(N=>({key:N.key,match:{value:N.value}}))},w=await dt({query:a,facets:["type","tickers","status","sectors"],filters:E,limit:50});n(1,f=w.results||[]),n(2,d=w.facets||{}),n(3,h=w.facet_suggest||{}),n(5,r={});for(const N of f)n(5,r[N.id]=!1,r);const ue=(C=i.find(N=>N.key==="type"))==null?void 0:C.value,oe=i.filter(N=>N.key==="tickers").map(N=>N.value),ve=(await vt({type:ue,tickers:oe.join(",")})).bucketed||{},Z=Object.entries(ve).map(([N,he])=>({date:N,count:(he||[]).length}));Z.sort((N,he)=>N.date.localeCompare(he.date)),n(6,t=Z.slice(-14))}catch(E){n(9,c=(E==null?void 0:E.message)??"Error")}finally{n(8,s=!1)}}function I(){_&&clearTimeout(_),_=setTimeout(()=>p(),400)}function H(C,E){i.find(w=>w.key===C&&w.value===E)||(n(4,i=[...i,{key:C,value:E}]),p())}function $(C){n(4,i=i.filter((E,w)=>w!==C)),p()}function J(){return Object.entries(r).filter(([,C])=>C).map(([C])=>C)}async function K(C){const E=J();E.length!==0&&(await _t(C,E),await p())}function ae(C){const E=C.currentTarget,w=!!(E&&E.checked);for(const ue in r)n(5,r[ue]=w,r)}function se(C,E){const w=E.currentTarget;n(5,r[C]=!!(w&&w.checked),r)}ft(()=>{p()});function F(){a=this.value,n(0,a)}return[a,f,d,h,i,r,t,u,s,c,p,I,H,$,K,ae,se,F,C=>C.key==="Enter"&&p(),C=>$(C),()=>{n(4,i=[]),p()},(C,E)=>H(C,E.value),(C,E)=>H(C,E.value),()=>K("quarantine"),()=>K("unquarantine"),()=>K("reembed"),()=>K("promote"),(C,E)=>se(C.id,E),C=>{n(7,u=C)},()=>{n(7,u=null)}]}class jt extends ct{constructor(e){super(),it(this,e,It,Et,ut,{},null,[-1,-1])}}export{jt as component};
