import{S as zt,i as qt,s as Gt,d as v,B as tt,r as Bt,v as he,w as ne,a as X,y as Ie,H as pt,x as jt,z as Me,b as j,c as a,C as lt,q as me,m as _,J as Ft,e as g,f as I,g as y,h as w,o as M,D as nt,j as m,t as N,k as T,E as st,l as Ht,p as Mt,u as we,n as xe,A as Je,G as Jt}from"../chunks/DnBpi1Qd.js";import{e as le}from"../chunks/B5jFdsvg.js";import"../chunks/IHki7fMi.js";import{p as Wt}from"../chunks/6INZBkdj.js";import{x as Kt,y as Qt,z as Xt,A as Yt,w as Zt,B as $t}from"../chunks/BnvI_Nfc.js";import{T as el}from"../chunks/DPWOJN0Q.js";import{T as Lt}from"../chunks/B3c7iK5f.js";function gt(n,e,t){const l=n.slice();return l[28]=e[t],l}function mt(n,e,t){const l=n.slice();return l[31]=e[t],l}function bt(n,e,t){const l=n.slice();return l[34]=e[t][0],l[35]=e[t][1],l}function kt(n,e,t){const l=n.slice();return l[38]=e[t],l}function Ct(n,e,t){const l=n.slice();return l[41]=e[t],l}function It(n,e,t){const l=n.slice();return l[41]=e[t],l}function xt(n,e,t){const l=n.slice();return l[46]=e[t],l}function Et(n,e,t){const l=n.slice();return l[49]=e[t],l}function Dt(n){let e,t="Suggestions",l,s,i=le(n[5]),r=[];for(let c=0;c<i.length;c+=1)r[c]=Vt(Et(n,i,c));return{c(){e=m("div"),e.textContent=t,l=T(),s=m("div");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=g(c,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-1ee2hlk"&&(e.textContent=t),l=w(c),s=g(c,"DIV",{class:!0});var d=I(s);for(let o=0;o<r.length;o+=1)r[o].l(d);d.forEach(v),this.h()},h(){_(e,"class","mt-3 text-xs text-neutral-400"),_(s,"class","mt-1 flex flex-wrap gap-2")},m(c,d){j(c,e,d),j(c,l,d),j(c,s,d);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(s,null)},p(c,d){if(d[0]&60){i=le(c[5]);let o;for(o=0;o<i.length;o+=1){const u=Et(c,i,o);r[o]?r[o].p(u,d):(r[o]=Vt(u),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d(c){c&&(v(e),v(l),v(s)),we(r,c)}}}function Vt(n){let e,t,l=n[49].title+"",s,i,r;function c(){return n[18](n[49])}return{c(){e=m("button"),t=N("+ "),s=N(l),this.h()},l(d){e=g(d,"BUTTON",{class:!0});var o=I(e);t=y(o,"+ "),s=y(o,l),o.forEach(v),this.h()},h(){_(e,"class","px-2 py-1 bg-neutral-800 hover:bg-neutral-700 rounded text-xs")},m(d,o){j(d,e,o),a(e,t),a(e,s),i||(r=me(e,"click",c),i=!0)},p(d,o){n=d,o[0]&32&&l!==(l=n[49].title+"")&&X(s,l)},d(d){d&&v(e),i=!1,r()}}}function tl(n){var at,it,ut,ct,ht;let e,t,l="Current",s,i,r,c=((at=n[1].thought)==null?void 0:at.title)+"",d,o,u,f=((it=n[1].thought)==null?void 0:it.type)+"",b,k,E=((ut=n[1].thought)==null?void 0:ut.status)+"",L,P,J,D,H,S,de="Outgoing",G,F,se,U,Q,ee="Incoming",Ee,ue,be,C,B,oe="Neighbor Facets",fe,ce,De,re,R,Ge="Graph (depth 1)",_e,ve,V,A=n[8].nodes.length+"",pe,ae,ie=n[8].edges.length+"",ge,Ye,Ve,Te,Oe,ot="Nodes",Ze,ye,$e,Ne,Pe,rt="Edges",et,Ue,ke,te=((ht=(ct=n[1].thought)==null?void 0:ct.tickers)==null?void 0:ht.length)&&wt(n),Ae=le(n[1].outgoing),z=[];for(let h=0;h<Ae.length;h+=1)z[h]=Ot(It(n,Ae,h));const St=h=>he(z[h],1,1,()=>{z[h]=null});let Be=le(n[1].incoming),q=[];for(let h=0;h<Be.length;h+=1)q[h]=yt(Ct(n,Be,h));const Rt=h=>he(q[h],1,1,()=>{q[h]=null});let Se=le(Object.entries(n[7])),Y=[];for(let h=0;h<Se.length;h+=1)Y[h]=Pt(bt(n,Se,h));let Re=le(n[8].nodes),Z=[];for(let h=0;h<Re.length;h+=1)Z[h]=Ut(mt(n,Re,h));let ze=le(n[8].edges),$=[];for(let h=0;h<ze.length;h+=1)$[h]=At(gt(n,ze,h));return{c(){e=m("div"),t=m("div"),t.textContent=l,s=T(),i=m("div"),r=m("div"),d=N(c),o=T(),u=m("div"),b=N(f),k=N(" · "),L=N(E),P=T(),te&&te.c(),J=T(),D=m("div"),H=m("div"),S=m("div"),S.textContent=de,G=T(),F=m("ul");for(let h=0;h<z.length;h+=1)z[h].c();se=T(),U=m("div"),Q=m("div"),Q.textContent=ee,Ee=T(),ue=m("ul");for(let h=0;h<q.length;h+=1)q[h].c();be=T(),C=m("div"),B=m("div"),B.textContent=oe,fe=T(),ce=m("div");for(let h=0;h<Y.length;h+=1)Y[h].c();De=T(),re=m("div"),R=m("div"),R.textContent=Ge,_e=T(),ve=m("div"),V=N("Nodes: "),pe=N(A),ae=N(" · Edges: "),ge=N(ie),Ye=T(),Ve=m("div"),Te=m("div"),Oe=m("div"),Oe.textContent=ot,Ze=T(),ye=m("div");for(let h=0;h<Z.length;h+=1)Z[h].c();$e=T(),Ne=m("div"),Pe=m("div"),Pe.textContent=rt,et=T(),Ue=m("div");for(let h=0;h<$.length;h+=1)$[h].c();this.h()},l(h){e=g(h,"DIV",{class:!0});var x=I(e);t=g(x,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1mkhc8"&&(t.textContent=l),s=w(x),i=g(x,"DIV",{class:!0});var O=I(i);r=g(O,"DIV",{class:!0});var Fe=I(r);d=y(Fe,c),Fe.forEach(v),o=w(O),u=g(O,"DIV",{class:!0});var je=I(u);b=y(je,f),k=y(je," · "),L=y(je,E),je.forEach(v),P=w(O),te&&te.l(O),O.forEach(v),x.forEach(v),J=w(h),D=g(h,"DIV",{class:!0});var Ce=I(D);H=g(Ce,"DIV",{class:!0});var Le=I(H);S=g(Le,"DIV",{class:!0,"data-svelte-h":!0}),M(S)!=="svelte-1njpatj"&&(S.textContent=de),G=w(Le),F=g(Le,"UL",{class:!0});var p=I(F);for(let K=0;K<z.length;K+=1)z[K].l(p);p.forEach(v),Le.forEach(v),se=w(Ce),U=g(Ce,"DIV",{class:!0});var W=I(U);Q=g(W,"DIV",{class:!0,"data-svelte-h":!0}),M(Q)!=="svelte-y1llop"&&(Q.textContent=ee),Ee=w(W),ue=g(W,"UL",{class:!0});var dt=I(ue);for(let K=0;K<q.length;K+=1)q[K].l(dt);dt.forEach(v),W.forEach(v),be=w(Ce),C=g(Ce,"DIV",{class:!0});var We=I(C);B=g(We,"DIV",{class:!0,"data-svelte-h":!0}),M(B)!=="svelte-2kpbk9"&&(B.textContent=oe),fe=w(We),ce=g(We,"DIV",{class:!0});var ft=I(ce);for(let K=0;K<Y.length;K+=1)Y[K].l(ft);ft.forEach(v),We.forEach(v),Ce.forEach(v),De=w(h),re=g(h,"DIV",{class:!0});var qe=I(re);R=g(qe,"DIV",{class:!0,"data-svelte-h":!0}),M(R)!=="svelte-zo3mcg"&&(R.textContent=Ge),_e=w(qe),ve=g(qe,"DIV",{class:!0});var He=I(ve);V=y(He,"Nodes: "),pe=y(He,A),ae=y(He," · Edges: "),ge=y(He,ie),He.forEach(v),Ye=w(qe),Ve=g(qe,"DIV",{class:!0});var Ke=I(Ve);Te=g(Ke,"DIV",{});var Qe=I(Te);Oe=g(Qe,"DIV",{class:!0,"data-svelte-h":!0}),M(Oe)!=="svelte-1pavq3z"&&(Oe.textContent=ot),Ze=w(Qe),ye=g(Qe,"DIV",{class:!0});var _t=I(ye);for(let K=0;K<Z.length;K+=1)Z[K].l(_t);_t.forEach(v),Qe.forEach(v),$e=w(Ke),Ne=g(Ke,"DIV",{});var Xe=I(Ne);Pe=g(Xe,"DIV",{class:!0,"data-svelte-h":!0}),M(Pe)!=="svelte-1g7fdkc"&&(Pe.textContent=rt),et=w(Xe),Ue=g(Xe,"DIV",{class:!0});var vt=I(Ue);for(let K=0;K<$.length;K+=1)$[K].l(vt);vt.forEach(v),Xe.forEach(v),Ke.forEach(v),qe.forEach(v),this.h()},h(){_(t,"class","text-sm text-neutral-400 mb-2"),_(r,"class","font-semibold"),_(u,"class","text-neutral-400"),_(i,"class","text-sm"),_(e,"class","bg-neutral-900 rounded p-4 border border-neutral-800"),_(S,"class","text-sm text-neutral-400"),_(F,"class","mt-2 space-y-1"),_(H,"class","bg-neutral-900 rounded p-4 border border-neutral-800"),_(Q,"class","text-sm text-neutral-400"),_(ue,"class","mt-2 space-y-1"),_(U,"class","bg-neutral-900 rounded p-4 border border-neutral-800"),_(B,"class","text-sm text-neutral-400"),_(ce,"class","grid grid-cols-2 gap-2 mt-2"),_(C,"class","bg-neutral-900 rounded p-4 border border-neutral-800"),_(D,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),_(R,"class","text-sm text-neutral-400 mb-2"),_(ve,"class","text-xs text-neutral-400"),_(Oe,"class","text-xs text-neutral-500 mb-1"),_(ye,"class","max-h-40 overflow-auto space-y-1"),_(Pe,"class","text-xs text-neutral-500 mb-1"),_(Ue,"class","max-h-40 overflow-auto space-y-1"),_(Ve,"class","mt-2 grid grid-cols-1 md:grid-cols-2 gap-2"),_(re,"class","bg-neutral-900 rounded p-4 border border-neutral-800")},m(h,x){j(h,e,x),a(e,t),a(e,s),a(e,i),a(i,r),a(r,d),a(i,o),a(i,u),a(u,b),a(u,k),a(u,L),a(i,P),te&&te.m(i,null),j(h,J,x),j(h,D,x),a(D,H),a(H,S),a(H,G),a(H,F);for(let O=0;O<z.length;O+=1)z[O]&&z[O].m(F,null);a(D,se),a(D,U),a(U,Q),a(U,Ee),a(U,ue);for(let O=0;O<q.length;O+=1)q[O]&&q[O].m(ue,null);a(D,be),a(D,C),a(C,B),a(C,fe),a(C,ce);for(let O=0;O<Y.length;O+=1)Y[O]&&Y[O].m(ce,null);j(h,De,x),j(h,re,x),a(re,R),a(re,_e),a(re,ve),a(ve,V),a(ve,pe),a(ve,ae),a(ve,ge),a(re,Ye),a(re,Ve),a(Ve,Te),a(Te,Oe),a(Te,Ze),a(Te,ye);for(let O=0;O<Z.length;O+=1)Z[O]&&Z[O].m(ye,null);a(Ve,$e),a(Ve,Ne),a(Ne,Pe),a(Ne,et),a(Ne,Ue);for(let O=0;O<$.length;O+=1)$[O]&&$[O].m(Ue,null);ke=!0},p(h,x){var O,Fe,je,Ce,Le;if((!ke||x[0]&2)&&c!==(c=((O=h[1].thought)==null?void 0:O.title)+"")&&X(d,c),(!ke||x[0]&2)&&f!==(f=((Fe=h[1].thought)==null?void 0:Fe.type)+"")&&X(b,f),(!ke||x[0]&2)&&E!==(E=((je=h[1].thought)==null?void 0:je.status)+"")&&X(L,E),(Le=(Ce=h[1].thought)==null?void 0:Ce.tickers)!=null&&Le.length?te?te.p(h,x):(te=wt(h),te.c(),te.m(i,null)):te&&(te.d(1),te=null),x[0]&8770){Ae=le(h[1].outgoing);let p;for(p=0;p<Ae.length;p+=1){const W=It(h,Ae,p);z[p]?(z[p].p(W,x),ne(z[p],1)):(z[p]=Ot(W),z[p].c(),ne(z[p],1),z[p].m(F,null))}for(Je(),p=Ae.length;p<z.length;p+=1)St(p);Me()}if(x[0]&578){Be=le(h[1].incoming);let p;for(p=0;p<Be.length;p+=1){const W=Ct(h,Be,p);q[p]?(q[p].p(W,x),ne(q[p],1)):(q[p]=yt(W),q[p].c(),ne(q[p],1),q[p].m(ue,null))}for(Je(),p=Be.length;p<q.length;p+=1)Rt(p);Me()}if(x[0]&128){Se=le(Object.entries(h[7]));let p;for(p=0;p<Se.length;p+=1){const W=bt(h,Se,p);Y[p]?Y[p].p(W,x):(Y[p]=Pt(W),Y[p].c(),Y[p].m(ce,null))}for(;p<Y.length;p+=1)Y[p].d(1);Y.length=Se.length}if((!ke||x[0]&256)&&A!==(A=h[8].nodes.length+"")&&X(pe,A),(!ke||x[0]&256)&&ie!==(ie=h[8].edges.length+"")&&X(ge,ie),x[0]&320){Re=le(h[8].nodes);let p;for(p=0;p<Re.length;p+=1){const W=mt(h,Re,p);Z[p]?Z[p].p(W,x):(Z[p]=Ut(W),Z[p].c(),Z[p].m(ye,null))}for(;p<Z.length;p+=1)Z[p].d(1);Z.length=Re.length}if(x[0]&256){ze=le(h[8].edges);let p;for(p=0;p<ze.length;p+=1){const W=gt(h,ze,p);$[p]?$[p].p(W,x):($[p]=At(W),$[p].c(),$[p].m(Ue,null))}for(;p<$.length;p+=1)$[p].d(1);$.length=ze.length}},i(h){if(!ke){for(let x=0;x<Ae.length;x+=1)ne(z[x]);for(let x=0;x<Be.length;x+=1)ne(q[x]);ke=!0}},o(h){z=z.filter(Boolean);for(let x=0;x<z.length;x+=1)he(z[x]);q=q.filter(Boolean);for(let x=0;x<q.length;x+=1)he(q[x]);ke=!1},d(h){h&&(v(e),v(J),v(D),v(De),v(re)),te&&te.d(),we(z,h),we(q,h),we(Y,h),we(Z,h),we($,h)}}}function ll(n){let e,t;return{c(){e=m("div"),t=N(n[11]),this.h()},l(l){e=g(l,"DIV",{class:!0});var s=I(e);t=y(s,n[11]),s.forEach(v),this.h()},h(){_(e,"class","text-red-400")},m(l,s){j(l,e,s),a(e,t)},p(l,s){s[0]&2048&&X(t,l[11])},i:xe,o:xe,d(l){l&&v(e)}}}function nl(n){let e,t="Loading…";return{c(){e=m("div"),e.textContent=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-186sx6p"&&(e.textContent=t),this.h()},h(){_(e,"class","text-neutral-400")},m(l,s){j(l,e,s)},p:xe,i:xe,o:xe,d(l){l&&v(e)}}}function wt(n){let e,t=le(n[1].thought.tickers),l=[];for(let s=0;s<t.length;s+=1)l[s]=Tt(xt(n,t,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=g(s,"DIV",{class:!0});var i=I(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(v),this.h()},h(){_(e,"class","mt-1 flex gap-1")},m(s,i){j(s,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,i){if(i[0]&2){t=le(s[1].thought.tickers);let r;for(r=0;r<t.length;r+=1){const c=xt(s,t,r);l[r]?l[r].p(c,i):(l[r]=Tt(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(s){s&&v(e),we(l,s)}}}function Tt(n){let e,t=n[46]+"",l;return{c(){e=m("span"),l=N(t),this.h()},l(s){e=g(s,"SPAN",{class:!0});var i=I(e);l=y(i,t),i.forEach(v),this.h()},h(){_(e,"class","text-xs bg-neutral-800 rounded px-2 py-0.5")},m(s,i){j(s,e,i),a(e,l)},p(s,i){i[0]&2&&t!==(t=s[46]+"")&&X(l,t)},d(s){s&&v(e)}}}function sl(n){let e,t,l,s=n[41].to_id+"",i,r,c,d,o="Preview",u,f,b,k,E,L,P,J="Unlink",D,H;function S(){return n[21](n[41])}function de(){return n[22](n[41])}return{c(){e=m("div"),t=m("div"),l=m("a"),i=N(s),c=T(),d=m("button"),d.textContent=o,u=T(),f=m("div"),b=m("a"),k=N("Open"),L=T(),P=m("button"),P.textContent=J,this.h()},l(G){e=g(G,"DIV",{class:!0});var F=I(e);t=g(F,"DIV",{class:!0});var se=I(t);l=g(se,"A",{class:!0,href:!0});var U=I(l);i=y(U,s),U.forEach(v),c=w(se),d=g(se,"BUTTON",{class:!0,"data-svelte-h":!0}),M(d)!=="svelte-169w6ml"&&(d.textContent=o),se.forEach(v),u=w(F),f=g(F,"DIV",{class:!0});var Q=I(f);b=g(Q,"A",{class:!0,href:!0});var ee=I(b);k=y(ee,"Open"),ee.forEach(v),L=w(Q),P=g(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),M(P)!=="svelte-1uy2imp"&&(P.textContent=J),Q.forEach(v),F.forEach(v),this.h()},h(){_(l,"class","hover:underline"),_(l,"href",r=`/manifold/thoughts/${n[41].to_id}`),_(d,"class","px-2 py-0.5 rounded bg-neutral-900 hover:bg-neutral-800 text-xs"),_(t,"class","truncate flex items-center gap-2"),_(b,"class","px-2 py-1 rounded bg-neutral-900 hover:bg-neutral-800"),_(b,"href",E=`/manifold/thoughts/${n[41].to_id}`),_(P,"class","px-2 py-1 rounded bg-neutral-900 hover:bg-neutral-800"),_(f,"class","flex gap-2"),_(e,"class","flex items-center justify-between bg-neutral-800 rounded px-2 py-1")},m(G,F){j(G,e,F),a(e,t),a(t,l),a(l,i),a(t,c),a(t,d),a(e,u),a(e,f),a(f,b),a(b,k),a(f,L),a(f,P),D||(H=[me(d,"click",S),me(P,"click",de)],D=!0)},p(G,F){n=G,F[0]&2&&s!==(s=n[41].to_id+"")&&X(i,s),F[0]&2&&r!==(r=`/manifold/thoughts/${n[41].to_id}`)&&_(l,"href",r),F[0]&2&&E!==(E=`/manifold/thoughts/${n[41].to_id}`)&&_(b,"href",E)},i:xe,o:xe,d(G){G&&v(e),D=!1,Bt(H)}}}function ol(n){let e,t,l,s,i,r="Unlink",c,d,o;t=new Lt({props:{thought:n[9][n[41].to_id],showActions:!0,onPreview:n[19]}});function u(){return n[20](n[41])}return{c(){e=m("div"),st(t.$$.fragment),l=T(),s=m("div"),i=m("button"),i.textContent=r,this.h()},l(f){e=g(f,"DIV",{class:!0});var b=I(e);nt(t.$$.fragment,b),l=w(b),s=g(b,"DIV",{class:!0});var k=I(s);i=g(k,"BUTTON",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-rncg12"&&(i.textContent=r),k.forEach(v),b.forEach(v),this.h()},h(){_(i,"class","px-2 py-1 rounded bg-neutral-900 hover:bg-neutral-800 text-xs"),_(s,"class","mt-2 flex justify-end"),_(e,"class","bg-neutral-800 rounded p-2")},m(f,b){j(f,e,b),lt(t,e,null),a(e,l),a(e,s),a(s,i),c=!0,d||(o=me(i,"click",u),d=!0)},p(f,b){n=f;const k={};b[0]&514&&(k.thought=n[9][n[41].to_id]),b[0]&64&&(k.onPreview=n[19]),t.$set(k)},i(f){c||(ne(t.$$.fragment,f),c=!0)},o(f){he(t.$$.fragment,f),c=!1},d(f){f&&v(e),tt(t),d=!1,o()}}}function Ot(n){let e,t,l,s,i;const r=[ol,sl],c=[];function d(o,u){return o[9][o[41].to_id]?0:1}return t=d(n),l=c[t]=r[t](n),{c(){e=m("li"),l.c(),s=T(),this.h()},l(o){e=g(o,"LI",{class:!0});var u=I(e);l.l(u),s=w(u),u.forEach(v),this.h()},h(){_(e,"class","text-sm")},m(o,u){j(o,e,u),c[t].m(e,null),a(e,s),i=!0},p(o,u){let f=t;t=d(o),t===f?c[t].p(o,u):(Je(),he(c[f],1,1,()=>{c[f]=null}),Me(),l=c[t],l?l.p(o,u):(l=c[t]=r[t](o),l.c()),ne(l,1),l.m(e,s))},i(o){i||(ne(l),i=!0)},o(o){he(l),i=!1},d(o){o&&v(e),c[t].d()}}}function rl(n){let e,t,l,s=n[41].from_id+"",i,r,c,d,o="Preview",u,f,b,k,E,L;function P(){return n[24](n[41])}return{c(){e=m("div"),t=m("div"),l=m("a"),i=N(s),c=T(),d=m("button"),d.textContent=o,u=T(),f=m("a"),b=N("Open"),this.h()},l(J){e=g(J,"DIV",{class:!0});var D=I(e);t=g(D,"DIV",{class:!0});var H=I(t);l=g(H,"A",{class:!0,href:!0});var S=I(l);i=y(S,s),S.forEach(v),c=w(H),d=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),M(d)!=="svelte-1kho8am"&&(d.textContent=o),H.forEach(v),u=w(D),f=g(D,"A",{class:!0,href:!0});var de=I(f);b=y(de,"Open"),de.forEach(v),D.forEach(v),this.h()},h(){_(l,"class","hover:underline"),_(l,"href",r=`/manifold/thoughts/${n[41].from_id}`),_(d,"class","px-2 py-0.5 rounded bg-neutral-900 hover:bg-neutral-800 text-xs"),_(t,"class","flex items-center gap-2"),_(f,"class","px-2 py-1 rounded bg-neutral-900 hover:bg-neutral-800"),_(f,"href",k=`/manifold/thoughts/${n[41].from_id}`),_(e,"class","flex items-center justify-between bg-neutral-800 rounded px-2 py-1")},m(J,D){j(J,e,D),a(e,t),a(t,l),a(l,i),a(t,c),a(t,d),a(e,u),a(e,f),a(f,b),E||(L=me(d,"click",P),E=!0)},p(J,D){n=J,D[0]&2&&s!==(s=n[41].from_id+"")&&X(i,s),D[0]&2&&r!==(r=`/manifold/thoughts/${n[41].from_id}`)&&_(l,"href",r),D[0]&2&&k!==(k=`/manifold/thoughts/${n[41].from_id}`)&&_(f,"href",k)},i:xe,o:xe,d(J){J&&v(e),E=!1,L()}}}function al(n){let e,t,l;return t=new Lt({props:{thought:n[9][n[41].from_id],showActions:!0,onPreview:n[23]}}),{c(){e=m("div"),st(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{class:!0});var i=I(e);nt(t.$$.fragment,i),i.forEach(v),this.h()},h(){_(e,"class","bg-neutral-800 rounded p-2")},m(s,i){j(s,e,i),lt(t,e,null),l=!0},p(s,i){const r={};i[0]&514&&(r.thought=s[9][s[41].from_id]),i[0]&64&&(r.onPreview=s[23]),t.$set(r)},i(s){l||(ne(t.$$.fragment,s),l=!0)},o(s){he(t.$$.fragment,s),l=!1},d(s){s&&v(e),tt(t)}}}function yt(n){let e,t,l,s,i;const r=[al,rl],c=[];function d(o,u){return o[9][o[41].from_id]?0:1}return t=d(n),l=c[t]=r[t](n),{c(){e=m("li"),l.c(),s=T(),this.h()},l(o){e=g(o,"LI",{class:!0});var u=I(e);l.l(u),s=w(u),u.forEach(v),this.h()},h(){_(e,"class","text-sm")},m(o,u){j(o,e,u),c[t].m(e,null),a(e,s),i=!0},p(o,u){let f=t;t=d(o),t===f?c[t].p(o,u):(Je(),he(c[f],1,1,()=>{c[f]=null}),Me(),l=c[t],l?l.p(o,u):(l=c[t]=r[t](o),l.c()),ne(l,1),l.m(e,s))},i(o){i||(ne(l),i=!0)},o(o){he(l),i=!1},d(o){o&&v(e),c[t].d()}}}function Nt(n){let e,t=n[38].value+"",l,s,i=n[38].count+"",r,c;return{c(){e=m("span"),l=N(t),s=N(" ("),r=N(i),c=N(")"),this.h()},l(d){e=g(d,"SPAN",{class:!0});var o=I(e);l=y(o,t),s=y(o," ("),r=y(o,i),c=y(o,")"),o.forEach(v),this.h()},h(){_(e,"class","px-2 py-1 bg-neutral-800 rounded text-xs")},m(d,o){j(d,e,o),a(e,l),a(e,s),a(e,r),a(e,c)},p(d,o){o[0]&128&&t!==(t=d[38].value+"")&&X(l,t),o[0]&128&&i!==(i=d[38].count+"")&&X(r,i)},d(d){d&&v(e)}}}function Pt(n){let e,t,l=n[34]+"",s,i,r,c,d=le(n[35].slice(0,6)),o=[];for(let u=0;u<d.length;u+=1)o[u]=Nt(kt(n,d,u));return{c(){e=m("div"),t=m("div"),s=N(l),i=T(),r=m("div");for(let u=0;u<o.length;u+=1)o[u].c();c=T(),this.h()},l(u){e=g(u,"DIV",{});var f=I(e);t=g(f,"DIV",{class:!0});var b=I(t);s=y(b,l),b.forEach(v),i=w(f),r=g(f,"DIV",{class:!0});var k=I(r);for(let E=0;E<o.length;E+=1)o[E].l(k);k.forEach(v),c=w(f),f.forEach(v),this.h()},h(){_(t,"class","text-xs text-neutral-500 uppercase mb-1"),_(r,"class","flex flex-wrap gap-1")},m(u,f){j(u,e,f),a(e,t),a(t,s),a(e,i),a(e,r);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);a(e,c)},p(u,f){if(f[0]&128&&l!==(l=u[34]+"")&&X(s,l),f[0]&128){d=le(u[35].slice(0,6));let b;for(b=0;b<d.length;b+=1){const k=kt(u,d,b);o[b]?o[b].p(k,f):(o[b]=Nt(k),o[b].c(),o[b].m(r,null))}for(;b<o.length;b+=1)o[b].d(1);o.length=d.length}},d(u){u&&v(e),we(o,u)}}}function Ut(n){var b;let e,t,l=(((b=n[31].payload)==null?void 0:b.title)||n[31].id)+"",s,i,r,c="Preview",d,o,u;function f(){return n[25](n[31])}return{c(){e=m("div"),t=m("div"),s=N(l),i=T(),r=m("button"),r.textContent=c,d=T(),this.h()},l(k){e=g(k,"DIV",{class:!0});var E=I(e);t=g(E,"DIV",{class:!0});var L=I(t);s=y(L,l),L.forEach(v),i=w(E),r=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-cldu4o"&&(r.textContent=c),d=w(E),E.forEach(v),this.h()},h(){_(t,"class","truncate"),_(r,"class","px-2 py-0.5 rounded bg-neutral-900 hover:bg-neutral-800 text-xs"),_(e,"class","flex items-center justify-between bg-neutral-800 rounded px-2 py-1")},m(k,E){j(k,e,E),a(e,t),a(t,s),a(e,i),a(e,r),a(e,d),o||(u=me(r,"click",f),o=!0)},p(k,E){var L;n=k,E[0]&256&&l!==(l=(((L=n[31].payload)==null?void 0:L.title)||n[31].id)+"")&&X(s,l)},d(k){k&&v(e),o=!1,u()}}}function At(n){let e,t=n[28].from+"",l,s,i=n[28].type+"",r,c,d=n[28].to+"",o;return{c(){e=m("div"),l=N(t),s=N(" —["),r=N(i),c=N("]→ "),o=N(d),this.h()},l(u){e=g(u,"DIV",{class:!0});var f=I(e);l=y(f,t),s=y(f," —["),r=y(f,i),c=y(f,"]→ "),o=y(f,d),f.forEach(v),this.h()},h(){_(e,"class","text-xs bg-neutral-800 rounded px-2 py-1")},m(u,f){j(u,e,f),a(e,l),a(e,s),a(e,r),a(e,c),a(e,o)},p(u,f){f[0]&256&&t!==(t=u[28].from+"")&&X(l,t),f[0]&256&&i!==(i=u[28].type+"")&&X(r,i),f[0]&256&&d!==(d=u[28].to+"")&&X(o,d)},d(u){u&&v(e)}}}function il(n){let e,t,l,s,i,r,c,d="Add relation",o,u,f,b,k,E,L="related",P,J="supports",D,H="contradicts",S,de="followup",G,F="duplicate",se,U,Q,ee,Ee="Link",ue,be,C,B,oe,fe,ce,De,re,R=n[5].length>0&&Dt(n);const Ge=[nl,ll,tl],_e=[];function ve(V,A){return V[10]?0:V[11]?1:V[1]?2:-1}return~(C=ve(n))&&(B=_e[C]=Ge[C](n)),fe=new el({props:{thoughtId:n[6],onClose:n[26]}}),{c(){e=m("div"),t=m("h1"),l=N("Relations · "),s=N(n[0]),i=T(),r=m("div"),c=m("div"),c.textContent=d,o=T(),u=m("div"),f=m("input"),b=T(),k=m("select"),E=m("option"),E.textContent=L,P=m("option"),P.textContent=J,D=m("option"),D.textContent=H,S=m("option"),S.textContent=de,G=m("option"),G.textContent=F,se=T(),U=m("input"),Q=T(),ee=m("button"),ee.textContent=Ee,ue=T(),R&&R.c(),be=T(),B&&B.c(),oe=T(),st(fe.$$.fragment),this.h()},l(V){e=g(V,"DIV",{class:!0});var A=I(e);t=g(A,"H1",{class:!0});var pe=I(t);l=y(pe,"Relations · "),s=y(pe,n[0]),pe.forEach(v),i=w(A),r=g(A,"DIV",{class:!0});var ae=I(r);c=g(ae,"DIV",{class:!0,"data-svelte-h":!0}),M(c)!=="svelte-1mdso84"&&(c.textContent=d),o=w(ae),u=g(ae,"DIV",{class:!0});var ie=I(u);f=g(ie,"INPUT",{class:!0,placeholder:!0}),b=w(ie),k=g(ie,"SELECT",{class:!0});var ge=I(k);E=g(ge,"OPTION",{"data-svelte-h":!0}),M(E)!=="svelte-2i58nk"&&(E.textContent=L),P=g(ge,"OPTION",{"data-svelte-h":!0}),M(P)!=="svelte-v3opxa"&&(P.textContent=J),D=g(ge,"OPTION",{"data-svelte-h":!0}),M(D)!=="svelte-gu0g4u"&&(D.textContent=H),S=g(ge,"OPTION",{"data-svelte-h":!0}),M(S)!=="svelte-wcikom"&&(S.textContent=de),G=g(ge,"OPTION",{"data-svelte-h":!0}),M(G)!=="svelte-112btdo"&&(G.textContent=F),ge.forEach(v),se=w(ie),U=g(ie,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),Q=w(ie),ee=g(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),M(ee)!=="svelte-x46xm4"&&(ee.textContent=Ee),ie.forEach(v),ue=w(ae),R&&R.l(ae),ae.forEach(v),be=w(A),B&&B.l(A),A.forEach(v),oe=w(V),nt(fe.$$.fragment,V),this.h()},h(){_(t,"class","text-2xl font-semibold"),_(c,"class","text-sm text-neutral-400"),_(f,"class","px-3 py-2 rounded bg-neutral-800"),_(f,"placeholder","related_id"),E.__value="related",Ie(E,E.__value),P.__value="supports",Ie(P,P.__value),D.__value="contradicts",Ie(D,D.__value),S.__value="followup",Ie(S,S.__value),G.__value="duplicate",Ie(G,G.__value),_(k,"class","px-3 py-2 rounded bg-neutral-800"),n[3]===void 0&&Ft(()=>n[16].call(k)),_(U,"type","number"),_(U,"min","0"),_(U,"max","1"),_(U,"step","0.1"),_(U,"class","px-3 py-2 rounded bg-neutral-800"),_(U,"placeholder","weight"),_(ee,"class","px-3 py-2 rounded bg-indigo-600 hover:bg-indigo-500"),_(u,"class","grid grid-cols-1 md:grid-cols-4 gap-2 mt-2"),_(r,"class","bg-neutral-900 rounded p-4 border border-neutral-800"),_(e,"class","p-6 space-y-4 h-full overflow-auto")},m(V,A){j(V,e,A),a(e,t),a(t,l),a(t,s),a(e,i),a(e,r),a(r,c),a(r,o),a(r,u),a(u,f),Ie(f,n[2]),a(u,b),a(u,k),a(k,E),a(k,P),a(k,D),a(k,S),a(k,G),pt(k,n[3],!0),a(u,se),a(u,U),Ie(U,n[4]),a(u,Q),a(u,ee),a(r,ue),R&&R.m(r,null),a(e,be),~C&&_e[C].m(e,null),j(V,oe,A),lt(fe,V,A),ce=!0,De||(re=[me(f,"input",n[15]),me(k,"change",n[16]),me(U,"input",n[17]),me(ee,"click",n[12])],De=!0)},p(V,A){(!ce||A[0]&1)&&X(s,V[0]),A[0]&4&&f.value!==V[2]&&Ie(f,V[2]),A[0]&8&&pt(k,V[3]),A[0]&16&&jt(U.value)!==V[4]&&Ie(U,V[4]),V[5].length>0?R?R.p(V,A):(R=Dt(V),R.c(),R.m(r,null)):R&&(R.d(1),R=null);let pe=C;C=ve(V),C===pe?~C&&_e[C].p(V,A):(B&&(Je(),he(_e[pe],1,1,()=>{_e[pe]=null}),Me()),~C?(B=_e[C],B?B.p(V,A):(B=_e[C]=Ge[C](V),B.c()),ne(B,1),B.m(e,null)):B=null);const ae={};A[0]&64&&(ae.thoughtId=V[6]),A[0]&64&&(ae.onClose=V[26]),fe.$set(ae)},i(V){ce||(ne(B),ne(fe.$$.fragment,V),ce=!0)},o(V){he(B),he(fe.$$.fragment,V),ce=!1},d(V){V&&(v(e),v(oe)),R&&R.d(),~C&&_e[C].d(),tt(fe,V),De=!1,Bt(re)}}}function ul(n,e,t){let l;Ht(n,Wt,C=>t(14,l=C));let s="",i=null,r="",c="related",d=1,o=[],u=null,f={},b={nodes:[],edges:[]},k={},E=!1,L=null;async function P(){t(10,E=!0),t(11,L=null);try{t(1,i=await Kt(s));const C=await Qt(s,10);t(5,o=C.similar||[]);const B=await Xt(s);t(7,f=B.facets||{}),t(8,b=await Yt(s,1)),t(9,k={});for(const oe of i.thoughts||[])oe&&(oe.id||oe._id)&&t(9,k[oe.id||oe._id]=oe,k)}catch(C){t(11,L=(C==null?void 0:C.message)??"Error")}finally{t(10,E=!1)}}async function J(){await Zt(s,r),t(2,r=""),await P()}async function D(C){await $t(s,C),await P()}Mt(P);function H(){r=this.value,t(2,r)}function S(){c=Jt(this),t(3,c)}function de(){d=jt(this.value),t(4,d)}const G=C=>{t(2,r=C.thought_id),t(3,c="related"),t(4,d=1)},F=C=>{t(6,u=C)},se=C=>D(C.to_id),U=C=>{t(6,u=C.to_id)},Q=C=>D(C.to_id),ee=C=>{t(6,u=C)},Ee=C=>{t(6,u=C.from_id)},ue=C=>{t(6,u=C.id)},be=()=>{t(6,u=null)};return n.$$.update=()=>{n.$$.dirty[0]&16384&&t(0,s=l.params.id)},[s,i,r,c,d,o,u,f,b,k,E,L,J,D,l,H,S,de,G,F,se,U,Q,ee,Ee,ue,be]}class gl extends zt{constructor(e){super(),qt(this,e,ul,il,Gt,{},null,[-1,-1])}}export{gl as component};
